# ğŸ—“ï¸ 2025ë…„ 10ì›” 23ì¼ TIL

## ğŸ“Œ ì˜¤ëŠ˜ì˜ í‚¤ì›Œë“œ
`ìˆœí™˜ ì°¸ì¡°` `ìƒì„±ì ì£¼ì…` `Spring Events` `@Lazy` `ApplicationEventPublisher` `ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜` `ì˜ì¡´ì„± ì£¼ì…` `@EventListener` `ë°œí–‰-êµ¬ë… íŒ¨í„´`

---

## ìˆœí™˜ ì°¸ì¡° (Circular Dependency)

### ê°œë…

**ìˆœí™˜ ì°¸ì¡°(Circular Dependency)** ëŠ” ë‘ ê°œ ì´ìƒì˜ ë¹ˆ(Bean)ì´ ì„œë¡œë¥¼ ì˜ì¡´í•˜ëŠ” ìƒí™©ì„ ë§í•œë‹¤.

```java
class A {
    private B b;  // AëŠ” Bë¥¼ í•„ìš”ë¡œ í•¨
}

class B {
    private A a;  // BëŠ” Aë¥¼ í•„ìš”ë¡œ í•¨
}
```

### ì™œ ë¬¸ì œê°€ ë ê¹Œ?

Spring ì»¨í…Œì´ë„ˆê°€ Beanì„ ìƒì„±í•˜ëŠ” ê³¼ì •:

```
1. Aë¥¼ ìƒì„±í•˜ë ¤ë©´ â†’ Bê°€ í•„ìš”
2. Bë¥¼ ìƒì„±í•˜ë ¤ë©´ â†’ Aê°€ í•„ìš”
3. Aë¥¼ ìƒì„±í•˜ë ¤ë©´ â†’ Bê°€ í•„ìš” (ë¬´í•œ ë°˜ë³µ!)
```

ê²°ê³¼: `BeanCurrentlyInCreationException` ë°œìƒ

### ìˆœí™˜ ì°¸ì¡°ì˜ ì¢…ë¥˜

#### 1) ìƒì„±ì ì£¼ì… ìˆœí™˜ ì°¸ì¡°
```java
@Service
@RequiredArgsConstructor
public class UserService {
    private final OrderService orderService;  // âŒ ì¦‰ì‹œ ì˜ˆì™¸ ë°œìƒ
}

@Service
@RequiredArgsConstructor
public class OrderService {
    private final UserService userService;  // âŒ ì¦‰ì‹œ ì˜ˆì™¸ ë°œìƒ
}
```

**íŠ¹ì§•**: ì»´íŒŒì¼/ì‹¤í–‰ ì‹œì ì— ì¦‰ì‹œ ê°ì§€ë¨ (ì¢‹ì€ ê²ƒ!)

#### 2) í•„ë“œ/Setter ì£¼ì… ìˆœí™˜ ì°¸ì¡°
```java
@Service
public class UserService {
    @Autowired
    private OrderService orderService;  // âš ï¸ ëŸ°íƒ€ì„ì— ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
}

@Service
public class OrderService {
    @Autowired
    private UserService userService;  // âš ï¸ ëŸ°íƒ€ì„ì— ë¬¸ì œ ë°œìƒ ê°€ëŠ¥
}
```

**íŠ¹ì§•**: ì´ˆê¸°í™” í›„ ì‚¬ìš© ì‹œì ì— ë¬¸ì œ ë°œê²¬ë  ìˆ˜ ìˆìŒ (ë‚˜ìœ ê²ƒ)

### ìˆœí™˜ ì°¸ì¡° í•´ê²° ë°©ë²•

#### ë°©ë²• 1: êµ¬ì¡° ê°œì„  (ê¶Œì¥)
```java
// Before: ìˆœí™˜ ì°¸ì¡°
UserService âŸ· OrderService

// After: ì˜ì¡´ì„± ì¬êµ¬ì„±
UserService â†’ OrderFacade â† OrderService
```

#### ë°©ë²• 2: @Lazy ì‚¬ìš© (ì„ì‹œ ë°©í¸)
```java
@Service
@RequiredArgsConstructor
public class UserService {
    @Lazy  // ì‹¤ì œ ì‚¬ìš© ì‹œì ê¹Œì§€ ì´ˆê¸°í™” ì§€ì—°
    private final OrderService orderService;
}
```

#### ë°©ë²• 3: Setter ì£¼ì…ìœ¼ë¡œ ë³€ê²½ (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)
```java
@Service
public class UserService {
    private OrderService orderService;
    
    @Autowired
    public void setOrderService(OrderService orderService) {
        this.orderService = orderService;
    }
}
```

#### ë°©ë²• 4: ì´ë²¤íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ì „í™˜ (ê¶Œì¥)
```java
// A â†’ B ì§ì ‘ í˜¸ì¶œ ëŒ€ì‹ 
// A â†’ Event ë°œí–‰ â†’ Bê°€ ìˆ˜ì‹ 
```

---

## ìƒì„±ì ì£¼ì… (Constructor Injection)

### ì˜ì¡´ì„± ì£¼ì…(DI)ì˜ 3ê°€ì§€ ë°©ë²•

#### 1) í•„ë“œ ì£¼ì… (Field Injection)
```java
@Service
public class UserService {
    @Autowired  // ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•´ ì£¼ì…
    private UserRepository userRepository;
}
```

**ë‹¨ì **:
- ë¶ˆë³€ì„± ë³´ì¥ ì•ˆë¨ (ì–¸ì œë“  ë³€ê²½ ê°€ëŠ¥)
- ìˆœí™˜ ì°¸ì¡°ë¥¼ ëŠ¦ê²Œ ë°œê²¬
- í…ŒìŠ¤íŠ¸ ì‹œ Mock ì£¼ì…ì´ ë²ˆê±°ë¡œì›€
- final í‚¤ì›Œë“œ ì‚¬ìš© ë¶ˆê°€

#### 2) Setter ì£¼ì… (Setter Injection)
```java
@Service
public class UserService {
    private UserRepository userRepository;
    
    @Autowired
    public void setUserRepository(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}
```

**ë‹¨ì **:
- ë¶ˆë³€ì„± ë³´ì¥ ì•ˆë¨
- NPE ìœ„í—˜ (setter í˜¸ì¶œ ì „ ì‚¬ìš© ê°€ëŠ¥)
- ì„ íƒì  ì˜ì¡´ì„±ì—ë§Œ ì‚¬ìš© ê¶Œì¥

#### 3) ìƒì„±ì ì£¼ì… (Constructor Injection) - ê¶Œì¥
```java
@Service
@RequiredArgsConstructor  // Lombokì´ ìƒì„±ì ìë™ ìƒì„±
public class UserService {
    private final UserRepository userRepository;  // final ì‚¬ìš© ê°€ëŠ¥!
    
    // ìƒì„±ìë¥¼ í†µí•´ ì£¼ì…
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }
}
```

### ìƒì„±ì ì£¼ì…ì˜ ì¥ì 

#### 1. ë¶ˆë³€ì„± ë³´ì¥
```java
@Service
@RequiredArgsConstructor
public class UserService {
    private final UserRepository repository;  // final â†’ ì¬í• ë‹¹ ë¶ˆê°€
    
    public void someMethod() {
        // this.repository = new UserRepository();  // ì»´íŒŒì¼ ì—ëŸ¬
    }
}
```

#### 2. ìˆœí™˜ ì°¸ì¡° ì¡°ê¸° ë°œê²¬
```java
// ìƒì„±ì ì£¼ì…: ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ì¦‰ì‹œ ì˜ˆì™¸ ë°œìƒ
@RequiredArgsConstructor
public class A {
    private final B b;
}

@RequiredArgsConstructor
public class B {
    private final A a;  // BeanCurrentlyInCreationException ë°œìƒ
}
```

#### 3. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
```java
@Test
void testUserService() {
    // Mock ê°ì²´ë¥¼ ìƒì„±ìë¡œ ì£¼ì…í•˜ê¸° ì‰¬ì›€
    UserRepository mockRepository = mock(UserRepository.class);
    UserService service = new UserService(mockRepository);
    
    // í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
}
```

#### 4. ì˜ì¡´ì„± ëª…ì‹œ
```java
// ìƒì„±ìë¥¼ ë³´ë©´ ì–´ë–¤ ì˜ì¡´ì„±ì´ í•„ìš”í•œì§€ í•œëˆˆì— íŒŒì•… ê°€ëŠ¥
public UserService(
    UserRepository userRepository,
    EmailService emailService,
    LogService logService
) {
    // ì˜ì¡´ì„±ì´ ë§ìœ¼ë©´ â†’ í´ë˜ìŠ¤ ì±…ì„ì´ ê³¼ë„í•  ìˆ˜ ìˆë‹¤ëŠ” ì‹ í˜¸!
}
```

### ìƒì„±ì ì£¼ì… ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

```java
// Good: @RequiredArgsConstructor + final
@Service
@RequiredArgsConstructor
public class UserService {
    private final UserRepository userRepository;
    private final EmailService emailService;
}

// Good: ëª…ì‹œì  ìƒì„±ì (ì˜ì¡´ì„±ì´ ë³µì¡í•œ ê²½ìš°)
@Service
public class UserService {
    private final UserRepository userRepository;
    private final EmailService emailService;
    
    public UserService(
        UserRepository userRepository,
        EmailService emailService
    ) {
        this.userRepository = userRepository;
        this.emailService = emailService;
    }
}

// Bad: í•„ë“œ ì£¼ì…
@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;
}
```

---

## Spring Events

### ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë€?

**ë°œí–‰-êµ¬ë… íŒ¨í„´(Pub-Sub Pattern)** ì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ê°„ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ë°©ì‹

```
ë°œí–‰ì(Publisher) --[ì´ë²¤íŠ¸ ë°œí–‰]--> Spring Event System --[ì´ë²¤íŠ¸ ì „ë‹¬]--> êµ¬ë…ì(Listener)
```

### ê¸°ë³¸ êµ¬ì„± ìš”ì†Œ

#### 1. ì´ë²¤íŠ¸ í´ë˜ìŠ¤ (Event)
```java
// 1) ì¼ë°˜ í´ë˜ìŠ¤ë¡œ ì •ì˜ (Spring 4.2+)
public class UserRegisteredEvent {
    private final Long userId;
    private final String email;
    
    public UserRegisteredEvent(Long userId, String email) {
        this.userId = userId;
        this.email = email;
    }
    
    // Getter
}

// 2) Lombok í™œìš©
@Getter
@RequiredArgsConstructor
public class UserRegisteredEvent {
    private final Long userId;
    private final String email;
}
```

#### 2. ì´ë²¤íŠ¸ ë°œí–‰ì (Publisher)
```java
@Service
@RequiredArgsConstructor
public class UserService {
    private final UserRepository userRepository;
    private final ApplicationEventPublisher eventPublisher;  // Springì´ ìë™ ì£¼ì…
    
    public void registerUser(String email, String password) {
        // 1. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰
        User user = userRepository.save(new User(email, password));
        
        // 2. ì´ë²¤íŠ¸ ë°œí–‰
        eventPublisher.publishEvent(new UserRegisteredEvent(user.getId(), email));
        
        // 3. ì´í›„ ë¡œì§ ê³„ì† ì‹¤í–‰ (ë™ê¸°)
        log.info("User registered: {}", email);
    }
}
```

#### 3. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (Listener)
```java
@Component
@Slf4j
public class UserEventListener {
    
    // ë°©ë²• 1: @EventListener (ê¶Œì¥)
    @EventListener
    public void handleUserRegistered(UserRegisteredEvent event) {
        log.info("í™˜ì˜ ì´ë©”ì¼ ë°œì†¡: {}", event.getEmail());
        // ì´ë©”ì¼ ë°œì†¡ ë¡œì§
    }
    
    // ë°©ë²• 2: @TransactionalEventListener (íŠ¸ëœì­ì…˜ ì œì–´)
    @TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
    public void handleAfterCommit(UserRegisteredEvent event) {
        log.info("DB ì»¤ë°‹ í›„ ì‹¤í–‰: {}", event.getEmail());
        // ì™¸ë¶€ API í˜¸ì¶œ ë“±
    }
    
    // ë°©ë²• 3: ì¡°ê±´ë¶€ ì‹¤í–‰
    @EventListener(condition = "#event.userId > 1000")
    public void handleVipUser(UserRegisteredEvent event) {
        log.info("VIP ì‚¬ìš©ì ì²˜ë¦¬: {}", event.getUserId());
    }
}
```

### Spring Events ì£¼ìš” íŠ¹ì§•

#### 1. ë™ê¸° vs ë¹„ë™ê¸°

```java
// ê¸°ë³¸: ë™ê¸° ì‹¤í–‰
@EventListener
public void handle(UserRegisteredEvent event) {
    // ë°œí–‰ì ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
    // ì´ ë©”ì„œë“œê°€ ëë‚˜ì•¼ ë°œí–‰ìê°€ ë‹¤ìŒ ì½”ë“œ ì‹¤í–‰
}

// ë¹„ë™ê¸° ì‹¤í–‰ (@EnableAsync í•„ìš”)
@Async
@EventListener
public void handle(UserRegisteredEvent event) {
    // ë³„ë„ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
    // ë°œí–‰ìëŠ” ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ ë‹¤ìŒ ì½”ë“œ ì‹¤í–‰
}
```

#### 2. íŠ¸ëœì­ì…˜ ì œì–´

```java
@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
public void handleAfterCommit(UserRegisteredEvent event) {
    // DB íŠ¸ëœì­ì…˜ì´ ì»¤ë°‹ëœ í›„ì—ë§Œ ì‹¤í–‰
    // ë¡¤ë°±ë˜ë©´ ì‹¤í–‰ ì•ˆë¨!
}

@TransactionalEventListener(phase = TransactionPhase.BEFORE_COMMIT)
public void handleBeforeCommit(UserRegisteredEvent event) {
    // ì»¤ë°‹ ì§ì „ ì‹¤í–‰
}

@TransactionalEventListener(phase = TransactionPhase.AFTER_ROLLBACK)
public void handleAfterRollback(UserRegisteredEvent event) {
    // ë¡¤ë°± í›„ ì‹¤í–‰
}
```

#### 3. ì—¬ëŸ¬ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ê°€ëŠ¥

```java
// ë¦¬ìŠ¤ë„ˆ 1: ì´ë©”ì¼ ë°œì†¡
@Component
class EmailListener {
    @EventListener
    public void sendEmail(UserRegisteredEvent event) {
        // ì´ë©”ì¼ ë°œì†¡
    }
}

// ë¦¬ìŠ¤ë„ˆ 2: í†µê³„ ì—…ë°ì´íŠ¸
@Component
class StatisticsListener {
    @EventListener
    public void updateStats(UserRegisteredEvent event) {
        // í†µê³„ ì—…ë°ì´íŠ¸
    }
}

// ë¦¬ìŠ¤ë„ˆ 3: ì•Œë¦¼ ì „ì†¡
@Component
class NotificationListener {
    @EventListener
    public void sendNotification(UserRegisteredEvent event) {
        // ì•Œë¦¼ ì „ì†¡
    }
}

// í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ ë°œí–‰ â†’ ì„¸ ë¦¬ìŠ¤ë„ˆ ëª¨ë‘ ì‹¤í–‰!
```

#### 4. ìš°ì„ ìˆœìœ„ ì§€ì •

```java
@Component
class MyListener {
    
    @EventListener
    @Order(1)  // ë¨¼ì € ì‹¤í–‰
    public void handleFirst(UserRegisteredEvent event) {
        // 1ìˆœìœ„ ì²˜ë¦¬
    }
    
    @EventListener
    @Order(2)  // ë‚˜ì¤‘ì— ì‹¤í–‰
    public void handleSecond(UserRegisteredEvent event) {
        // 2ìˆœìœ„ ì²˜ë¦¬
    }
}
```

### Spring Events í™œìš© íŒ¨í„´

#### íŒ¨í„´ 1: ë„ë©”ì¸ ì´ë²¤íŠ¸
```java
// ì£¼ë¬¸ ìƒì„± ì‹œ
@Service
public class OrderService {
    @Transactional
    public void createOrder(Order order) {
        orderRepository.save(order);
        eventPublisher.publishEvent(new OrderCreatedEvent(order.getId()));
    }
}

// ì¬ê³  ê°ì†Œ (ë¦¬ìŠ¤ë„ˆ)
@Component
class InventoryListener {
    @TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
    public void decreaseStock(OrderCreatedEvent event) {
        // ì£¼ë¬¸ ì»¤ë°‹ í›„ ì¬ê³  ê°ì†Œ
    }
}
```

#### íŒ¨í„´ 2: íš¡ë‹¨ ê´€ì‹¬ì‚¬ (Cross-Cutting Concerns)
```java
// ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë²¤íŠ¸ ë¡œê¹…
@Component
@Slf4j
class AuditListener {
    @EventListener
    public void logEvent(ApplicationEvent event) {
        log.info("Event occurred: {}", event.getClass().getSimpleName());
    }
}
```

#### íŒ¨í„´ 3: ìˆœí™˜ ì°¸ì¡° í•´ê²°
```java
// Before: ìˆœí™˜ ì°¸ì¡°
A â†’ B â†’ A  // âŒ

// After: ì´ë²¤íŠ¸ ì‚¬ìš©
A â†’ Event â†’ B  // âœ…
```

---

## ì‹¤ì „ ì˜ˆì œ: ìˆœí™˜ ì°¸ì¡° í•´ê²°í•˜ê¸°

### ë¬¸ì œ ìƒí™©

```java
@Service
@RequiredArgsConstructor
public class WebSocketSessionService {
    private final GameRoomLeaveService leaveService;  // â† GameRoomLeaveService ì˜ì¡´
    
    public void handleDisconnect(Long userId) {
        leaveService.leaveCurrentRoomByUser(userId);
    }
}

@Service
@RequiredArgsConstructor
public class GameRoomLeaveService {
    private final WebSocketSessionService sessionService;  // â† WebSocketSessionService ì˜ì¡´
    
    public void handleHostLeave(Long roomId, List<Long> userIds) {
        sessionService.cleanupSessions(userIds);  // ğŸ’¥ ìˆœí™˜ ì°¸ì¡°!
    }
}
```

**ê²°ê³¼**: `BeanCurrentlyInCreationException` ë°œìƒ

### 1ë‹¨ê³„ í•´ê²°: @Lazy ì ìš©

```java
@Service
public class GameRoomLeaveService {
    private final WebSocketSessionService sessionService;
    
    // @RequiredArgsConstructor ëŒ€ì‹  ëª…ì‹œì  ìƒì„±ì
    public GameRoomLeaveService(@Lazy WebSocketSessionService sessionService) {
        this.sessionService = sessionService;  // ì§€ì—° ì´ˆê¸°í™”
    }
}
```

**ì¥ì **: ë¹ ë¥´ê²Œ ë¬¸ì œ í•´ê²°  
**ë‹¨ì **: ìˆœí™˜ ì°¸ì¡°ëŠ” ì—¬ì „íˆ ì¡´ì¬ (ê¸°ìˆ  ë¶€ì±„)

### 2ë‹¨ê³„ í•´ê²°: Spring Events ì ìš©

#### Step 1: ì´ë²¤íŠ¸ ì •ì˜
```java
@Getter
@RequiredArgsConstructor
public class RoomClosedEvent {
    private final Long roomId;
    private final List<Long> remainingUserIds;
}
```

#### Step 2: ë°œí–‰ì ìˆ˜ì •
```java
@Service
@RequiredArgsConstructor
public class GameRoomLeaveService {
    private final ApplicationEventPublisher eventPublisher;  // sessionService ì œê±°!
    
    public void handleHostLeave(Long roomId, List<Long> userIds) {
        // 1. ë°© ì¢…ë£Œ ë¡œì§
        closeRoom(roomId);
        
        // 2. ì´ë²¤íŠ¸ ë°œí–‰ (ì„¸ì…˜ ì •ë¦¬ëŠ” ë¦¬ìŠ¤ë„ˆê°€ ì²˜ë¦¬)
        eventPublisher.publishEvent(new RoomClosedEvent(roomId, userIds));
    }
}
```

#### Step 3: êµ¬ë…ì ì¶”ê°€
```java
@Service
@RequiredArgsConstructor
public class WebSocketSessionService {
    // leaveService ì˜ì¡´ì„±ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ (ë‹¨ë°©í–¥ì´ë¯€ë¡œ OK)
    
    @EventListener
    public void handleRoomClosed(RoomClosedEvent event) {
        // ì´ë²¤íŠ¸ ìˆ˜ì‹  â†’ ì„¸ì…˜ ì •ë¦¬
        cleanupSessions(event.getRemainingUserIds());
    }
}
```

### ê²°ê³¼ ë¹„êµ

```
[Before: ìˆœí™˜ ì°¸ì¡°]
WebSocketSessionService âŸ· GameRoomLeaveService
â””â”€ ì‹¤í–‰ ë¶ˆê°€

[1ë‹¨ê³„: @Lazy]
WebSocketSessionService âŸ· GameRoomLeaveService (ì§€ì—°)
â””â”€ ì‹¤í–‰ ê°€ëŠ¥, but ìˆœí™˜ ì°¸ì¡° ì—¬ì „íˆ ì¡´ì¬

[2ë‹¨ê³„: Events]
WebSocketSessionService â†’ GameRoomLeaveService
                              â†“ (ì´ë²¤íŠ¸)
                   WebSocketSessionService (ë¦¬ìŠ¤ë„ˆ)
â””â”€ ë‹¨ë°©í–¥ ì˜ì¡´ì„±, ìˆœí™˜ ì°¸ì¡° ì™„ì „ ì œê±°
```

---

## ìµœì¢… ì •ë¦¬

### í•µì‹¬ ê°œë… ìš”ì•½

**1. ìˆœí™˜ ì°¸ì¡° (Circular Dependency)**
```
- ì •ì˜: ë‘ ê°œ ì´ìƒì˜ ë¹ˆì´ ì„œë¡œë¥¼ ì˜ì¡´í•˜ëŠ” ìƒí™©
- ë¬¸ì œ: Bean ìƒì„± ë¶ˆê°€ â†’ BeanCurrentlyInCreationException
- í•´ê²°: êµ¬ì¡° ê°œì„ , @Lazy, ì´ë²¤íŠ¸ ê¸°ë°˜ ì „í™˜
```

**2. ìƒì„±ì ì£¼ì… (Constructor Injection)**
```
ì¥ì :
   - ë¶ˆë³€ì„± ë³´ì¥ (final ì‚¬ìš©)
   - ìˆœí™˜ ì°¸ì¡° ì¡°ê¸° ë°œê²¬
   - í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
   - ì˜ì¡´ì„± ëª…ì‹œ
   
ê¶Œì¥: @RequiredArgsConstructor + final ì¡°í•©
ì§€ì–‘: í•„ë“œ ì£¼ì… (@Autowired)
```

**3. Spring Events**
```
í•µì‹¬: ë°œí–‰-êµ¬ë… íŒ¨í„´ìœ¼ë¡œ ê²°í•©ë„ ë‚®ì¶¤
êµ¬ì„±: Event í´ë˜ìŠ¤ + Publisher + Listener
íŠ¹ì§•:
   - ë™ê¸°/ë¹„ë™ê¸° ì„ íƒ ê°€ëŠ¥
   - íŠ¸ëœì­ì…˜ ì œì–´ ê°€ëŠ¥
   - ì—¬ëŸ¬ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ê°€ëŠ¥
   - ìˆœí™˜ ì°¸ì¡° í•´ê²°
```

### ì–¸ì œ ë¬´ì—‡ì„ ì‚¬ìš©í• ê¹Œ?

| ìƒí™© | í•´ê²° ë°©ë²• | ìš°ì„ ìˆœìœ„ |
|------|----------|---------|
| ìˆœí™˜ ì°¸ì¡° ë°œìƒ | êµ¬ì¡° ê°œì„  ë˜ëŠ” Events | ë†’ìŒ |
| ê¸´ê¸‰ ë°°í¬ í•„ìš” | @Lazy ì„ì‹œ ì ìš© | ì¤‘ê°„ |
| ì˜ì¡´ì„± ì£¼ì… | ìƒì„±ì ì£¼ì… | ë†’ìŒ |
| ë¹„ë™ê¸° ì²˜ë¦¬ í•„ìš” | @Async + Events | ë†’ìŒ |
| ì—¬ëŸ¬ í›„ì† ì‘ì—… | Events (ì—¬ëŸ¬ ë¦¬ìŠ¤ë„ˆ) | ë†’ìŒ |

### ì˜¤ëŠ˜ì˜ êµí›ˆ

**1. ìˆœí™˜ ì°¸ì¡°ëŠ” ì„¤ê³„ ëƒ„ìƒˆ(Code Smell)ë‹¤**
- ë‘ í´ë˜ìŠ¤ê°€ ì„œë¡œë¥¼ ì°¸ì¡°í•œë‹¤ë©´, ì±…ì„ ë¶„ë¦¬ë¥¼ ë‹¤ì‹œ ìƒê°í•´ë³´ì
- `@Lazy`ëŠ” ì„ì‹œë°©í¸ì¼ ë¿, ê·¼ë³¸ í•´ê²°ì±…ì´ ì•„ë‹ˆë‹¤

**2. ìƒì„±ì ì£¼ì…ì„ í•­ìƒ ì‚¬ìš©í•˜ì**
- ë¶ˆë³€ì„±, ì•ˆì •ì„±, í…ŒìŠ¤íŠ¸ ìš©ì´ì„± ëª¨ë‘ í™•ë³´
- Lombokì˜ `@RequiredArgsConstructor`ë¥¼ ì ê·¹ í™œìš©

**3. ì´ë²¤íŠ¸ ê¸°ë°˜ì€ ê°•ë ¥í•˜ë‹¤**
- ì„œë¹„ìŠ¤ ê°„ ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ê°€ì¥ ìš°ì•„í•œ ë°©ë²•
- í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ í¬ê²Œ í–¥ìƒë¨
- ì²˜ìŒì—” ë³µì¡í•´ ë³´ì´ì§€ë§Œ, ìµìˆ™í•´ì§€ë©´ ë§¤ìš° ìœ ìš©í•¨

### ë‹¤ìŒ í•™ìŠµ ì£¼ì œ

- Springì˜ íŠ¸ëœì­ì…˜ ì „íŒŒ (Transaction Propagation)
- @Async ì‹¬í™” (ThreadPoolTaskExecutor ì„¤ì •)
- ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„ (DDD)ì˜ ë„ë©”ì¸ ì´ë²¤íŠ¸
- CQRS íŒ¨í„´ê³¼ ì´ë²¤íŠ¸ ì†Œì‹±

### ì°¸ê³  ìë£Œ

- [Spring Framework - Core Technologies](https://docs.spring.io/spring-framework/reference/core.html)
- [Spring Events Documentation](https://docs.spring.io/spring-framework/reference/core/beans/context-introduction.html#context-functionality-events)
- [Baeldung - Constructor Injection](https://www.baeldung.com/constructor-injection-in-spring)
- [Baeldung - Spring Events](https://www.baeldung.com/spring-events)

---

## ğŸ“ ì˜¤ëŠ˜ì˜ ì •ë¦¬

ì˜¤ëŠ˜ì€ ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ë°œìƒí•œ ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ í•´ê²°í•˜ë©´ì„œ Springì˜ ì˜ì¡´ì„± ê´€ë¦¬ì™€ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œì„ ê¹Šì´ ìˆê²Œ ê³µë¶€í•  ìˆ˜ ìˆì—ˆë‹¤.

íŠ¹íˆ **"ì™œ ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€?"** ì™€ **"ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ì˜ ì§„ì •í•œ ê°€ì¹˜"** ë¥¼ ëª¸ì†Œ ì²´í—˜í–ˆë‹¤.

ì²˜ìŒì—” `@Lazy`ë¡œ ë¹ ë¥´ê²Œ í•´ê²°í–ˆì§€ë§Œ, ì´ê²ƒì´ ì„ì‹œë°©í¸ì´ë¼ëŠ” ê±¸ ê¹¨ë‹«ê³  Spring Eventsë¡œ ë¦¬íŒ©í† ë§í•˜ë©´ì„œ ë” ë‚˜ì€ ì½”ë“œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆë‹¤.

ì•ìœ¼ë¡œëŠ” ë‘ í´ë˜ìŠ¤ê°€ ì„œë¡œë¥¼ ì°¸ì¡°í•˜ëŠ” ìƒí™©ì´ ìƒê¸°ë©´, ë¬´ì¡°ê±´ **"ì„¤ê³„ê°€ ì˜ëª»ëœ ê±´ ì•„ë‹ê¹Œ?"** ë¥¼ ë¨¼ì € ê³ ë¯¼í•´ë³´ëŠ” ìŠµê´€ì„ ê°€ì ¸ì•¼ê² ë‹¤.

**"ì¢‹ì€ ì½”ë“œëŠ” ë¹ ë¥´ê²Œ ì‘ë™í•˜ëŠ” ì½”ë“œê°€ ì•„ë‹ˆë¼, ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ì€ ì½”ë“œë‹¤."**
