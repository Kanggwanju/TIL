# ðŸ—“ï¸ 2025ë…„ 6ì›” 16ì¼ TIL

ì˜¤ëŠ˜ì€ ìžë°”ìŠ¤í¬ë¦½íŠ¸ì˜ closure, lexical-scope, debounce, throttleì„ ë°°ì›€.

1. closure
- ì¼ê¸‰ í•¨ìˆ˜: í•¨ìˆ˜ë¥¼ ê°’ìœ¼ë¡œ ì²˜ë¦¬, ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” í•¨ìˆ˜ê°€ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥
```js
function foo() {
  return 100;
}

function bar() {
  return foo;
}

const result = bar();
console.log(typeof result); // í•¨ìˆ˜
console.log(result);        // foo

const r1 = result(); // foo();
console.log(`r1: ${r1}`); // 100
```

```js
function calculate() {
  // ì¤‘ì²©í•¨ìˆ˜, í—¬í¼í•¨ìˆ˜
  function add(n1, n2) {
    return n1 + n2;
  }
  return add;
}

// ì¤‘ì²©í•¨ìˆ˜, í—¬í¼í•¨ìˆ˜ë¥¼ calculate ì™¸ë¶€ì—ì„œ
// í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥
// add(10, 20); => ì—ëŸ¬!
const result2 = calculate(); // add()
console.log(`result2: `, result2(50, 70)) // 120;
```

```js
const calculate2 = () => (n1, n2) => n1 * n2;

const r3 = calculate2()(10, 3);
console.log(`r3: ${r3}`);
```

2. lexical scope(ë ‰ì‹œì»¬ ìŠ¤ì½”í”„)
- ìžë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” **ì½”ë“œê°€ ì‹¤í–‰ë  ë•Œ(runtime)**ê°€ ì•„ë‹ˆë¼ ì½”ë“œë¥¼ ìž‘ì„±í•  ë•Œ(compile/define) ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•¨.
- "ì–´ë””ì„œ ì„ ì–¸í–ˆëŠ”ì§€" ê¸°ì¤€ìœ¼ë¡œ ìŠ¤ì½”í”„ê°€ ê²°ì •
```js
function outer() {
let x = 100;
}

console.log(x); // âŒ ReferenceError
```
- xëŠ” outer() í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì„ ì–¸ë˜ì—ˆê³ , ë°”ê¹¥ìª½ì—ì„œëŠ” ì½”ë“œìƒ ìœ„ì¹˜ê°€ ì™¸ë¶€ë¼ì„œ ì ‘ê·¼ ë¶ˆê°€í•¨.

3. í´ë¡œì €, ë ‰ì‹œì»¬ ìŠ¤ì½”í”„
```js
function increaseClosure() {
  let count = 0; // ì§€ì—­ ë³€ìˆ˜

  return {
    increaseCount: () => ++count,
    decreaseCount: () => --count
  };
}
// ì·¨ë¯¸ ê°œìˆ˜ë¥¼ ì„¸ëŠ” í•¨ìˆ˜ ì •ì˜(x) -> í´ë¡œì €ì—ê²Œ ë°›ì•„ì˜´
const { increaseCount: increaseHobbyCount, decreaseCount: decreaseHobbyCount } = increaseClosure();
// ì¹œêµ¬ ìˆ˜ë¥¼ ì„¸ëŠ” í•¨ìˆ˜ë¥¼ í´ë¡œì €ì—ê²Œ ë˜ ë°›ì•„ì˜´
const { increaseCount: increaseFriendCount, decreaseCount: decreaseFriendCount } = increaseClosure();
console.log('===== ì·¨ë¯¸ ì¹´ìš´íŒ… ì‹œìž‘! =====');
console.log(increaseHobbyCount()); // 1, increaseCount()
console.log(increaseHobbyCount()); // 2
console.log(decreaseHobbyCount()); // 1, decreaseCount();
console.log(increaseHobbyCount()); // 2

console.log('===== ì¹œêµ¬ ì¹´ìš´íŒ… ì‹œìž‘! =====');
console.log(increaseFriendCount()); // 1
console.log(increaseFriendCount()); // 2
console.log(decreaseFriendCount()); // 1
console.log(decreaseFriendCount()); // 0
```
- increaseClosureê°€ í˜¸ì¶œë˜ì–´ ëë‚œ í›„ ì›ëž˜ëŠ” countë¥¼ ì§€ì›Œì•¼ í•˜ì§€ë§Œ,
- í—¬í¼ í•¨ìˆ˜ì— ë¬¸ì œê°€ ìƒê¸¸ê¹Œë´ lexical scope ë¼ëŠ” íŠ¹ë³„í•œ ê³µê°„ì— countë¥¼ ë”°ë¡œ ë³´ê´€í•¨.


4. debounce (ë””ë°”ìš´ìŠ¤)
- ì‚¬ìš©ìžì˜ ìž…ë ¥ì„ ì¶©ë¶„ížˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ ìž…ë ¥ì„ ë©ˆì¶”ì—ˆì„ ë•Œ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒ.
- ì´ë²¤íŠ¸ê°€ ê³„ì† ë°œìƒí•˜ëŠ” ë™ì•ˆì€ ì‹¤í–‰ì„ ë¯¸ë£¨ê³ , ì´ë²¤íŠ¸ê°€ ëë‚œ í›„ì— ë”± í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ê³ ìž í•  ë•Œ ì í•©
- ë””ë°”ìš´ìŠ¤ë¥¼ í•´ì•¼ í•  ê²½ìš°ê°€ ë§Žì•„ì§ˆ ê²½ìš° ì „ì—­ ë³€ìˆ˜ë¡œ íƒ€ì´ë¨¸ ì•„ì´ë””ë¥¼
  ì—¬ëŸ¬ê°œ ì„ ì–¸ í•´ì•¼í•œë‹¤. ì´ë¥¼ ë§‰ê³ ìž íƒ€ì´ë¨¸ ì•„ì´ë””ë¥¼ í´ë¡œì €ë¡œ ì •ì˜.


```js
// ë””ë°”ìš´ìŠ¤ í´ë¡œì € í•¨ìˆ˜ ì •ì˜
function debounce(callback, delay) {
  // í´ë¡œì €ê°€ ê¸°ì–µí•  ë¹„ê³µê°œ ë³€ìˆ˜ë‹¤.
  // ì´ ë³€ìˆ˜ëŠ” debounce í•¨ìˆ˜ì˜ ì‹¤í–‰ ì™„ë£Œì‹œì—ë„ ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
  let timerId = null;

  // íŒŒë¼ë¯¸í„°ê°€ ëª‡ ê°œê°€ ë“¤ì–´ì˜¤ë“  ë°›ê¸° ìœ„í•´ì„œ ...ì„ ì¨ì¤Œ.
  return function (...args) {
    clearTimeout(timerId);

    timerId = setTimeout(() => {
      callback(...args);
    }, delay);
  }
}



// ìž…ë ¥ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
function searchHandler(e) {
  console.log('ì„œë²„ì— ìŒì‹ì´ë¦„ ìš”ì²­ì¤‘....');
  console.log(e.target.value);

  // ìž…ë ¥ëœ ìŒì‹ì´ë¦„ì— ë§žëŠ” ë°ì´í„°ë“¤ì„ ë°°ì—´ì—ì„œ í•„í„°ë§
  const foodName = e.target.value;
  const filteredFoods = foodItems.filter(food => food.includes(foodName));
  console.log(filteredFoods);

  if (filteredFoods.length > 0) {
    // ì´ì „ ê²°ê³¼ ì§€ìš°ê¸°
    $results.innerHTML = '';

    filteredFoods.forEach(food => {
      const $newDiv = document.createElement('div');
      $newDiv.classList.add('result-item');
      $newDiv.textContent = food;
      $results.append($newDiv);
    });
  } else {
    $results.textContent = 'ì¼ì¹˜í•˜ëŠ” ìŒì‹ì´ ì—†ìŠµë‹ˆë‹¤.';
  }

}

// ë””ë°”ìš´ìŠ¤ í´ë¡œì € í˜¸ì¶œ
const debounceHandler = debounce(searchHandler, 1000);

// ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë°”ì¸ë”©
$searchInput.addEventListener('input', e => debounceHandler(e));
```
- ë””ë°”ìš´ìŠ¤ í´ë¡œì €ë¥¼ í˜¸ì¶œí•  ë•Œ searchHandler í•¨ìˆ˜ì™€ delayë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì–´ ì£¼ì—ˆê³ ,
- debounce í•¨ìˆ˜ì˜ returnì€ í•¨ìˆ˜ì´ë‹¤.
- ê²°êµ­ debounceHandlerëŠ” debounce í•¨ìˆ˜ê°€ ë¦¬í„´í•œ í•¨ìˆ˜ë¡œ ë´ì•¼í•¨.
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë°”ì¸ë”©ì„ í†µí•´ ì´ë²¤íŠ¸ ê°ì²´(e)ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë„£ì–´ì¤˜ì„œ
- ê²°êµ­ searchHandler(e)ë¥¼ delay ì‹œê°„ ë’¤ì— ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.





5. ìŠ¤ë¡œí‹€
- ì¼ì • ì‹œê°„ ê°„ê²©ë§ˆë‹¤ ì´ë²¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©°, ê·¸ ì‚¬ì´ì— ë°œìƒí•œ ì´ë²¤íŠ¸ëŠ” ë¬´ì‹œ
- ì´ë²¤íŠ¸ê°€ ê³„ì† ë°œìƒí•˜ë”ë¼ë„ ì¼ì • ê°„ê²©ë§ˆë‹¤ í•œ ë²ˆì”© ì‹¤í–‰í•˜ê³ ìž í•  ë•Œ ì í•©

ìŠ¤ë¡œí‹€ í™œìš© ë¬´í•œ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸
- ë¬´í•œ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ëŠ” ìŠ¤í¬ë¡¤ì´ í™”ë©´ ìµœí•˜ë‹¨ì— ê°”ì„ ë•Œë§Œ ë°œë™í•¨.
- í™”ë©´ ìµœí•˜ë‹¨ ê°ì§€ë¥¼ ìœ„í•´ì„œëŠ” ìŠ¤í¬ë¡¤ ìœ„ì¹˜, ë·°í¬íŠ¸ ë†’ì´, ë¬¸ì € ì „ì²´ ë†’ì´ê°€ í•„ìš”

í˜„ìž¬ ìŠ¤í¬ë¡¤ì˜ yì¶• ìœ„ì¹˜
- `const scrollTop = window.scrollY;`

í˜„ìž¬ ë·°í¬íŠ¸ì˜ ë†’ì´ (ë¸Œë¼ìš°ì €ì—ì„œ ë³´ì´ëŠ” ë§Œí¼ì˜ ë†’ì´)
- ë·°í¬íŠ¸ ë†’ì´ëŠ” í•´ìƒë„ í¬ê¸°ì— ë”°ë¼ ë‹¬ë¼ì§
- `const windowHeight = window.innerHeight;`

ë¬¸ì„œ ì „ì²´ì˜ ë†’ì´ (ì•ˆ ë³´ì´ëŠ” ë¶€ë¶„ê¹Œì§€ í¬í•¨í•œ ë†’ì´)
- `const documentHeight = document.body.offsetHeight;`

ìŠ¤í¬ë¡¤ì´ íŽ˜ì´ì§€ì˜ 90%ì •ë„ ì™”ì„ë•Œ ë¯¸ë¦¬ ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë°œìƒ ì‹œí‚´
```js
if (scrollTop + windowHeight >= documentHeight - 100) {
  // console.log('ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë°œìƒ!');
  loadMoreContent();
}
```

ìŠ¤ë¡œí‹€ í•¨ìˆ˜ ì •ì˜
```js
function throttle(callback, delay) {
  let timerId = null; // í˜„ìž¬ ìŠ¤ë¡œí‹€ì´ ì¿¨íƒ€ìž„ì¤‘ì¸ì§€ ì•„ë‹Œì§€ ìƒíƒœë¥¼ ê¸°ì–µí•˜ëŠ” ë¹„ê³µê°œë³€ìˆ˜

  return (...args) => {
    // ì¿¨íƒ€ìž„ì´ ì•„ë‹ ë•Œë§Œ
    if (!timerId) {
      // ìŠ¤ë¡œí‹€ ì¿¨íƒ€ìž„ ì‹œìž‘
      timerId = setTimeout(() => {
        callback(...args); // 1000msì˜ ë”œë ˆì´ í›„ì— ì‹¤í–‰
        timerId = null;
      }, delay);
    }
  };
}
```

ì»¨í…ì¸  ë¡œë”©
```js
// ì´ˆê¸° ë°ì´í„° ê°œìˆ˜
let initCount = 16;

function loadMoreContent() {

  if (initCount >= 30) {
    return;
  }

  // ë¡œë”© ë©”ì‹œì§€ ë³´ì—¬ì£¼ê¸°
  const $loading = document.getElementById('loading');
  $loading.style.display = 'block';

  // ì‹¤ì œ ì„œë²„ì²˜ëŸ¼ ì‚´ì§ì˜ ê°•ì œë¡œë”©ì„ ë„£ì–´ë´„
  setTimeout(() => {
    for (let i = 0; i < 4; i++) {
      const $newDiv = document.createElement('div');
      $newDiv.classList.add('content-item');
      $newDiv.textContent = `ì¶”ê°€ëœ ì»¨í…ì¸  ${++initCount}`;

      document.getElementById('contentContainer').append($newDiv);

      // ë¡œë”© ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
      $loading.style.display = 'none';
    }
  }, 1500);
}
```

ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë°”ì¸ë”©
`window.addEventListener('scroll', throttle(scrollHandler, 1500));`




ðŸ” í˜„ìž¬ ì‚¬ì´ì¦ˆ ê°€ì ¸ì˜¤ê¸°
ë§Œì•½ í˜„ìž¬ í°íŠ¸ ì‚¬ì´ì¦ˆë¥¼ ë¨¼ì € í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´:
```js
console.log($secondText.style.fontSize); // ê²°ê³¼: '' (ë¹ˆ ë¬¸ìžì—´ì¼ ê°€ëŠ¥ì„± ë†’ìŒ!)
```
ì™œëƒí•˜ë©´ .style.fontSizeëŠ” ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë¡œ ì§€ì •ëœ ê°’ë§Œ ë³´ì—¬ì¤Œ


CSS ì—ì„œ ì„¤ì •ëœ ê°’ì€ **getComputedStyle()**ì„ ì¨ì•¼ ì •í™•ížˆ ê°€ì ¸ì˜¬ ìˆ˜ ìžˆìŒ!
```js
const currentSize = getComputedStyle($secondText).fontSize;
console.log(currentSize); // ì˜ˆ: '20px'
```
