# 🗓️ 2025년 9월 30일 TIL

## 📌 오늘의 키워드

`VPC`, `CIDR`, `서브넷 마스크`, `NAT Gateway`, `Security Group`, `NACL`, `VPC Peering`, `VPN`, `Direct Connect`, `Load Balancer`, `Auto Scaling`, `고가용성`

---

## VPC (Virtual Private Cloud)

### 개념 정리

* AWS 클라우드 내에서 논리적으로 격리된 가상 네트워크를 구축하는 서비스
* 사용자가 정의한 IP 주소 범위, 서브넷, 라우팅 테이블, 게이트웨이 등을 완전히 제어 가능
* 온프레미스 데이터센터와 유사한 네트워크 환경을 클라우드에 구성

### VPC의 구성 요소

* **CIDR 블록**: VPC의 IP 주소 범위 정의
* **서브넷**: VPC 내의 IP 주소 범위를 나눈 단위
* **라우팅 테이블**: 네트워크 트래픽의 경로 지정
* **인터넷 게이트웨이**: VPC와 인터넷 간 통신 활성화
* **NAT 게이트웨이**: 프라이빗 서브넷의 아웃바운드 인터넷 접속

### 포인트

* VPC는 리전별로 생성되며, 여러 가용 영역에 걸쳐 구성 가능
* 기본 VPC가 자동 생성되지만, 보안과 구조를 위해 커스텀 VPC 생성 권장
* VPC 간에는 기본적으로 통신이 불가능 (VPC Peering으로 연결 필요)

---

## CIDR (Classless Inter-Domain Routing)

### 개념 정리

* IP 주소 할당 방법 중 하나로, IP 주소와 서브넷 마스크를 슬래시(/) 표기법으로 표현
* 예: `10.0.0.0/16` → IP 범위는 10.0.0.0 ~ 10.0.255.255 (65,536개 주소)

### CIDR 표기법 이해

| CIDR 표기 | 서브넷 마스크 | 사용 가능 IP 수 | 용도 |
|-----------|--------------|----------------|------|
| /32 | 255.255.255.255 | 1개 | 단일 호스트 |
| /24 | 255.255.255.0 | 256개 | 소규모 네트워크 |
| /16 | 255.255.0.0 | 65,536개 | 중규모 네트워크 (VPC 기본) |
| /8 | 255.0.0.0 | 16,777,216개 | 대규모 네트워크 |

### 예시

```
VPC CIDR: 10.0.0.0/16 (10.0.0.0 ~ 10.0.255.255)
  ├─ 퍼블릭 서브넷: 10.0.1.0/24 (10.0.1.0 ~ 10.0.1.255)
  └─ 프라이빗 서브넷: 10.0.2.0/24 (10.0.2.0 ~ 10.0.2.255)
```

### 포인트

* `/` 뒤의 숫자가 클수록 사용 가능한 IP 주소 수가 적음
* AWS VPC는 `/16` ~ `/28` 범위의 CIDR 블록 지원
* RFC 1918에 정의된 프라이빗 IP 대역 사용 권장
  - `10.0.0.0/8` (10.0.0.0 ~ 10.255.255.255)
  - `172.16.0.0/12` (172.16.0.0 ~ 172.31.255.255)
  - `192.168.0.0/16` (192.168.0.0 ~ 192.168.255.255)

---

## 서브넷 마스크 (Subnet Mask)

### 개념 정리

* IP 주소를 네트워크 부분과 호스트 부분으로 구분하는 32비트 숫자
* CIDR 표기법과 함께 사용되어 IP 주소 범위를 정의

### 서브넷 마스크의 역할

* **네트워크 식별**: 같은 네트워크에 속한 장치들을 그룹화
* **IP 범위 제한**: 할당 가능한 IP 주소 수 결정
* **라우팅 효율화**: 네트워크 트래픽을 효율적으로 관리

### 예시

```
IP 주소: 192.168.1.10
서브넷 마스크: 255.255.255.0 (/24)
  → 네트워크 부분: 192.168.1
  → 호스트 부분: 10
  → 같은 네트워크 범위: 192.168.1.0 ~ 192.168.1.255
```

### 포인트

* 서브넷 마스크는 이진수로 연속된 1과 0으로 구성
* AWS에서는 CIDR 표기법(/숫자)을 주로 사용
* 서브넷을 작게 나누면 네트워크 관리는 용이하지만 IP 낭비 가능성 존재

---

## NAT Gateway (Network Address Translation)

### 개념 정리

* 프라이빗 서브넷의 인스턴스가 인터넷에 접속할 수 있도록 하는 관리형 서비스
* Private IP를 Public IP로 변환하여 아웃바운드 트래픽만 허용
* 인바운드 트래픽은 차단되어 보안성 유지

### NAT Gateway의 동작 방식

```
[프라이빗 서브넷 EC2]
  Private IP: 10.0.2.10
        ↓ (아웃바운드 요청)
   [NAT Gateway]
  Public IP: 54.123.45.67
        ↓
    [인터넷]
```

### 트래픽 흐름

| 방향 | 허용 여부 | 설명 |
|------|----------|------|
| 아웃바운드 | ✅ 허용 | 프라이빗 인스턴스 → 인터넷 (소프트웨어 업데이트 등) |
| 인바운드 | ❌ 차단 | 인터넷 → 프라이빗 인스턴스 (외부 공격 방지) |

### 사용 사례

* 프라이빗 서브넷의 EC2에서 패키지 업데이트 (`yum update`, `apt update`)
* 외부 API 호출 (날씨 API, 결제 게이트웨이 등)
* S3, DynamoDB 같은 AWS 서비스 접근

### 포인트

* NAT Gateway는 퍼블릭 서브넷에 배치되어야 함
* 가용성 확보를 위해 각 AZ마다 NAT Gateway 생성 권장
* NAT Instance(EC2 기반)보다 NAT Gateway(관리형)가 성능과 가용성 면에서 우수
* 비용 발생: 시간당 요금 + 데이터 처리 요금

---

## Security Group vs NACL

### 개념 정리

AWS에서 네트워크 보안을 제어하는 두 가지 방화벽 메커니즘

### Security Group (보안 그룹)

* **대상**: EC2 인스턴스 수준의 가상 방화벽
* **작동 방식**: 인스턴스의 ENI(Elastic Network Interface)에 연결
* **상태 추적**: Stateful (아웃바운드 응답 자동 허용)
* **규칙**: 허용(Allow) 규칙만 지정 가능, 거부(Deny) 불가
* **기본 정책**: 모든 인바운드 차단, 모든 아웃바운드 허용

### NACL (Network Access Control List)

* **대상**: 서브넷 수준의 방화벽
* **작동 방식**: 서브넷 경계에서 트래픽 제어
* **상태 추적**: Stateless (아웃바운드 응답도 명시적으로 허용 필요)
* **규칙**: 허용(Allow), 거부(Deny) 모두 지정 가능
* **기본 정책**: 모든 트래픽 허용

### 비교표

| 항목 | Security Group | NACL |
|------|----------------|------|
| 적용 레벨 | 인스턴스 (ENI) | 서브넷 |
| 상태 추적 | Stateful | Stateless |
| 허용 규칙 | ✅ | ✅ |
| 거부 규칙 | ❌ | ✅ |
| 규칙 평가 | 모든 규칙 평가 | 번호 순서대로 평가 |
| 연결 관계 | 다대다 가능 | 1 서브넷 : 1 NACL |

### NACL 규칙 번호 평가 방식

**규칙 평가 순서**
* 가장 낮은 번호부터 순차적으로 평가
* 일치하는 규칙을 찾으면 즉시 적용하고 나머지 규칙 무시

**예시**
```
규칙 90:  HTTP(80) 허용  ← 먼저 평가됨
규칙 100: 모든 트래픽 거부
규칙 110: HTTPS(443) 허용 ← 100번에서 이미 차단되므로 무시됨

결과: HTTP만 허용, HTTPS는 차단됨
```

### 올바른 NACL 설정 예시

```
인바운드 규칙:
  90: HTTP(80) 0.0.0.0/0 허용
  100: HTTPS(443) 0.0.0.0/0 허용
  110: SSH(22) 203.0.113.0/24 허용 (특정 IP만)
  120: 모든 트래픽 거부

아웃바운드 규칙:
  90: 임시 포트(1024-65535) 0.0.0.0/0 허용
  100: 모든 트래픽 거부
```

### 포인트

* **Security Group**: 인스턴스별 세밀한 제어 가능, 개발자 친화적
* **NACL**: 서브넷 전체를 보호하는 추가 보안 계층
* **권장 사항**: Security Group을 주요 방화벽으로 사용하고, NACL은 추가 방어선으로 활용
* **Stateless 주의**: NACL은 응답 트래픽도 명시적으로 허용해야 함 (임시 포트 범위 1024-65535)

---

## VPC 간 연결 방법

### VPC Peering

#### 개념 정리

* 두 VPC 간에 프라이빗 IPv4 또는 IPv6 주소를 사용하여 트래픽을 라우팅할 수 있는 연결
* 같은 리전 또는 다른 리전의 VPC 간 연결 가능
* 같은 계정 또는 다른 AWS 계정의 VPC 간 연결 가능

#### 특징

* **프라이빗 연결**: 인터넷을 거치지 않고 AWS 내부 네트워크로 통신
* **저지연**: 직접 연결되어 낮은 지연 시간
* **비용 효율적**: 데이터 전송 비용만 발생

#### 제약 사항

* **CIDR 중복 불가**: 연결하려는 VPC의 IP 대역이 겹치면 안 됨
* **전이적 피어링 불가**: VPC A ↔ VPC B ↔ VPC C 구조에서 A와 C는 직접 통신 불가
* **허브 앤 스포크 불가**: 중앙 VPC를 통한 여러 VPC 연결 불가

#### 사용 사례

```
[개발 VPC: 10.0.0.0/16]
         ↕ (VPC Peering)
[운영 VPC: 10.1.0.0/16]
```

### VPN (Virtual Private Network)

#### 개념 정리

* 인터넷을 통해 온프레미스 네트워크와 AWS VPC를 안전하게 연결하는 암호화 터널
* Site-to-Site VPN: 온프레미스 라우터와 AWS VPN 게이트웨이 간 연결
* IPSec 프로토콜로 트래픽 암호화

#### 구성 요소

* **Virtual Private Gateway**: VPC 측의 VPN 엔드포인트
* **Customer Gateway**: 온프레미스 측의 VPN 디바이스
* **VPN 터널**: 암호화된 연결 (일반적으로 이중화를 위해 2개 생성)

#### 특징

| 항목 | 설명 |
|------|------|
| 구축 시간 | 빠름 (수십 분 내) |
| 비용 | 저렴 (시간당 + 데이터 전송) |
| 대역폭 | 제한적 (최대 1.25 Gbps) |
| 암호화 | IPSec 프로토콜 |
| 지연 시간 | 인터넷 경로에 따라 변동 |

#### 사용 사례

* 임시 연결 또는 예산이 제한적인 경우
* 대역폭 요구사항이 낮은 경우
* 빠른 구축이 필요한 경우

### Direct Connect (DX)

#### 개념 정리

* AWS와 온프레미스 간에 전용 물리적 네트워크 연결을 제공하는 서비스
* DX Location(데이터센터)을 통해 AWS 네트워크에 직접 연결
* 인터넷을 거치지 않는 프라이빗 연결

#### 구성 요소

```
[온프레미스 데이터센터]
         ↓ (전용선)
   [DX Location]
         ↓ (AWS 백본)
      [AWS VPC]
```

#### 특징

| 항목 | 설명 |
|------|------|
| 구축 시간 | 느림 (수주 ~ 수개월) |
| 비용 | 높음 (포트 요금 + 데이터 전송) |
| 대역폭 | 높음 (1 Gbps ~ 100 Gbps) |
| 암호화 | 기본 제공 안 됨 (VPN over DX 사용) |
| 지연 시간 | 낮고 일관됨 |

#### 사용 사례

* 대용량 데이터 전송이 필요한 경우
* 낮고 일관된 지연 시간이 중요한 경우
* 규정 준수를 위해 전용선이 필요한 경우
* 하이브리드 클라우드 아키텍처 구축

### 연결 방법 비교

| 항목 | VPC Peering | VPN | Direct Connect |
|------|-------------|-----|----------------|
| 연결 대상 | VPC ↔ VPC | 온프레미스 ↔ VPC | 온프레미스 ↔ VPC |
| 구축 시간 | 빠름 (분) | 빠름 (분~시간) | 느림 (주~월) |
| 비용 | 낮음 | 중간 | 높음 |
| 대역폭 | 높음 | 제한적 (1.25 Gbps) | 매우 높음 (100 Gbps) |
| 암호화 | 불필요 | IPSec | 별도 구성 필요 |
| 용도 | AWS 내부 연결 | 임시/소규모 연결 | 대규모/장기 연결 |

### 포인트

* **VPC Peering**: AWS 내 VPC 간 연결에 최적, CIDR 중복 주의
* **VPN**: 빠른 구축과 저비용이 장점, 대역폭 제한 있음
* **Direct Connect**: 최고의 성능과 안정성, 높은 비용과 긴 구축 시간
* **하이브리드**: VPN + Direct Connect 조합으로 백업 구성 가능

---

## 가용성 및 확장성 (High Availability & Scalability)

### 개념 정리

클라우드 시스템의 안정성과 성능을 보장하기 위한 핵심 설계 원칙

### 확장성 (Scalability)

시스템의 용량을 늘리거나 줄이는 능력

#### 수직적 확장 (Scale Up/Down)

**개념**
* 단일 인스턴스의 사양을 변경하여 성능 향상
* CPU, 메모리, 스토리지 등을 업그레이드

**예시**
```
t2.micro (1 vCPU, 1GB RAM)
    ↓ Scale Up
t2.large (2 vCPU, 8GB RAM)
    ↓ Scale Up
m5.2xlarge (8 vCPU, 32GB RAM)
```

**특징**

| 장점 | 단점 |
|------|------|
| 구성 간단 | 시스템 재시작 필요 |
| 애플리케이션 수정 불필요 | 확장 한계 존재 |
| 단일 인스턴스로 관리 용이 | 단일 장애점(SPOF) |

**사용 사례**
* 데이터베이스 서버 (RDS 인스턴스 타입 변경)
* 레거시 애플리케이션 (분산 지원 안 됨)
* 개발/테스트 환경

#### 수평적 확장 (Scale Out/In)

**개념**
* 인스턴스 개수를 늘리거나 줄여서 부하 분산
* 시스템 중단 없이 확장 가능

**예시**
```
[EC2] → 트래픽 증가
[EC2] [EC2] → Scale Out
[EC2] [EC2] [EC2] → 더 확장
```

**특징**

| 장점 | 단점 |
|------|------|
| 무중단 확장 | 애플리케이션 분산 설계 필요 |
| 이론상 무제한 확장 | 로드 밸런서 필요 |
| 고가용성 확보 | 세션 관리 복잡 |
| 비용 효율적 | 초기 설계 복잡 |

**사용 사례**
* 웹 애플리케이션 서버
* API 서버
* 마이크로서비스 아키텍처

### 탄력성 (Elasticity)

**개념**
* 수요에 따라 자동으로 리소스를 확장/축소하는 능력
* Auto Scaling으로 구현

**예시**
```
평상시: EC2 2대
    ↓ (트래픽 급증)
피크 타임: EC2 10대 (자동 확장)
    ↓ (트래픽 감소)
평상시: EC2 2대 (자동 축소)
```

### 고가용성 (High Availability)

**개념**
* 시스템이 지속적으로 정상 운영 가능한 상태를 유지하는 능력
* 장애 발생 시에도 서비스 중단 최소화

**구현 방법**

#### 1. 다중 AZ 배포

```
[가용 영역 A]          [가용 영역 B]
    EC2 ←──────────→     EC2
    RDS ←──────────→     RDS (Standby)
   (Primary)
```

#### 2. 리소스 이중화

* 로드 밸런서로 트래픽 분산
* 여러 인스턴스에 애플리케이션 배포
* 데이터베이스 복제 (Multi-AZ, Read Replica)

#### 3. 자동 복구

* Auto Scaling: 비정상 인스턴스 자동 교체
* ELB Health Check: 비정상 대상 자동 제외
* Route 53 Health Check: 장애 시 다른 리전으로 라우팅

### 가용성 측정

| 가용성 (%) | 연간 다운타임 | 월간 다운타임 | 주간 다운타임 |
|-----------|--------------|--------------|--------------|
| 99% | 3.65일 | 7.2시간 | 1.68시간 |
| 99.9% | 8.76시간 | 43.2분 | 10.1분 |
| 99.99% | 52.56분 | 4.32분 | 1.01분 |
| 99.999% | 5.26분 | 25.9초 | 6.05초 |

### 포인트

* **수직 확장**: 빠르고 간단하지만 한계 존재, SPOF 위험
* **수평 확장**: 무제한 확장 가능, 고가용성 확보, 설계 복잡
* **탄력성**: 비용 최적화의 핵심, Auto Scaling 활용
* **고가용성**: 다중 AZ + 로드 밸런서 + Auto Scaling 조합
* **설계 원칙**: "장애는 발생한다" 가정하고 설계

---

## Elastic Load Balancer (ELB)

### 개념 정리

* AWS에서 제공하는 관리형 로드 밸런서 서비스
* 여러 대상(EC2, 컨테이너, IP 주소 등)으로 트래픽을 자동 분산
* 비정상 대상을 자동으로 감지하여 트래픽 라우팅 제어

### Load Balancer의 역할

#### 1. 트래픽 분산
```
      [클라이언트]
           ↓
    [Load Balancer]
     ↙    ↓    ↘
  [EC2] [EC2] [EC2]
```

#### 2. Health Check (상태 확인)

* 주기적으로 대상의 상태를 확인 (예: HTTP GET /)
* 비정상 대상 감지 시 트래픽 차단
* 정상으로 복구되면 트래픽 재개

**Health Check 설정 예시**
```
프로토콜: HTTP
경로: /health
포트: 80
정상 임계값: 2회 연속 성공
비정상 임계값: 2회 연속 실패
간격: 30초
타임아웃: 5초
```

#### 3. SSL/TLS 종료

* HTTPS 트래픽의 암호화/복호화를 로드 밸런서에서 처리
* 백엔드 인스턴스의 부하 감소

#### 4. 고정 세션 (Sticky Session)

* 동일 클라이언트의 요청을 동일 인스턴스로 라우팅
* 쿠키 기반 세션 유지

### ELB 유형

#### Application Load Balancer (ALB)

**계층**: Layer 7 (HTTP/HTTPS)

**특징**
* URL 경로 기반 라우팅
* 호스트 기반 라우팅
* WebSocket, HTTP/2 지원
* 컨테이너 및 Lambda 지원

**사용 사례**
```
api.example.com → API 서버
www.example.com → 웹 서버
admin.example.com → 관리 서버
```

#### Network Load Balancer (NLB)

**계층**: Layer 4 (TCP/UDP)

**특징**
* 초고성능 (초당 수백만 요청)
* 고정 IP 주소 제공
* 극히 낮은 지연 시간

**사용 사례**
* 게임 서버
* IoT 애플리케이션
* 고성능이 중요한 서비스

#### Gateway Load Balancer (GWLB)

**계층**: Layer 3 (IP)

**특징**
* 가상 어플라이언스 배포
* 방화벽, IDS/IPS 통합

**사용 사례**
* 보안 검사가 필요한 트래픽
* 네트워크 가상 어플라이언스 확장

### ELB 구성 요소

#### 리스너 (Listener)

* 클라이언트 연결 요청을 확인하는 프로세스
* 프로토콜과 포트 지정 (예: HTTP:80, HTTPS:443)

#### 대상 그룹 (Target Group)

* 트래픽을 라우팅할 대상들의 논리적 그룹
* EC2 인스턴스, IP 주소, Lambda 함수 등

#### 규칙 (Rule)

* 리스너가 대상 그룹으로 요청을 라우팅하는 조건
* 경로 기반, 호스트 기반, 헤더 기반 등

### ALB 라우팅 예시

```yaml
리스너: HTTPS:443
  규칙 1: /api/* → API 대상 그룹 (EC2 인스턴스)
  규칙 2: /images/* → 이미지 대상 그룹 (S3 오리진)
  규칙 3: 기본 규칙 → 웹 대상 그룹 (ECS 컨테이너)
```

### 포인트

* **관리형 서비스**: AWS가 자동으로 확장, 패치, 유지보수
* **고가용성**: 여러 AZ에 자동 분산 배치
* **Health Check 필수**: 애플리케이션에 `/health` 엔드포인트 구현 권장
* **비용**: 시간당 요금 + LCU(Load Balancer Capacity Units) 기반 요금
* **ALB 권장**: 대부분의 웹 애플리케이션에 적합

---

## EC2 Auto Scaling

### 개념 정리

* 애플리케이션 부하에 따라 EC2 인스턴스를 자동으로 추가하거나 제거하는 서비스
* 수요 변화에 맞춰 컴퓨팅 용량을 동적으로 조정
* 비용 최적화와 가용성 확보를 동시에 달성

### Auto Scaling의 구성 요소

#### 1. 시작 템플릿 (Launch Template)

* 인스턴스 생성 시 필요한 정보 정의
* AMI ID, 인스턴스 타입, 보안 그룹, 키 페어 등

```json
{
  "ImageId": "ami-12345678",
  "InstanceType": "t3.micro",
  "KeyName": "my-key-pair",
  "SecurityGroupIds": ["sg-12345678"],
  "UserData": "#!/bin/bash\nyum update -y"
}
```

#### 2. Auto Scaling 그룹 (ASG)

* EC2 인스턴스들의 논리적 그룹
* 최소/최대/희망 용량 설정
* 여러 AZ에 인스턴스 분산

**용량 설정 예시**
```
최소 용량(Min): 2대 (항상 유지)
희망 용량(Desired): 4대 (목표 상태)
최대 용량(Max): 10대 (확장 한계)
```

#### 3. 조정 정책 (Scaling Policy)

Auto Scaling이 언제, 얼마나 확장/축소할지 정의

### 조정 정책 유형

#### 대상 추적 조정 (Target Tracking)

**개념**: 특정 지표를 목표값으로 유지

**예시**
```
목표: CPU 사용률 50% 유지
  → CPU > 50%: 인스턴스 추가
  → CPU < 50%: 인스턴스 제거
```

**설정 예시**
```json
{
  "TargetValue": 50.0,
  "PredefinedMetricType": "ASGAverageCPUUtilization"
}
```

#### 단계 조정 (Step Scaling)

**개념**: 지표 변화 정도에 따라 단계적으로 조정

**예시**
```
CPU 50-60%: 인스턴스 1대 추가
CPU 60-70%: 인스턴스 2대 추가
CPU 70% 이상: 인스턴스 3대 추가
```

#### 예약된 조정 (Scheduled Scaling)

**개념**: 특정 시간에 용량 변경

**예시**
```
월-금 09:00: 10대로 확장 (업무 시작)
월-금 18:00: 2대로 축소 (업무 종료)
```

### Auto Scaling 동작 예시

```
시간대별 트래픽 변화
09:00 - 낮은 트래픽 → 2대 유지
12:00 - 트래픽 증가 → 4대로 확장 (점심시간)
15:00 - 보통 트래픽 → 3대로 축소
19:00 - 트래픽 급증 → 8대로 확장 (저녁 피크)
23:00 - 낮은 트래픽 → 2대로 축소
```

### Health Check 통합

Auto Scaling은 다음 Health Check를 기반으로 인스턴스 교체

* **EC2 상태 확인**: 인스턴스가 실행 중인지 확인
* **ELB Health Check**: 애플리케이션이 정상인지 확인 (권장)

```
비정상 인스턴스 감지
    ↓
종료 및 제거
    ↓
새 인스턴스 자동 시작
    ↓
ELB에 등록 및 트래픽 수신
```

### Auto Scaling + ELB 아키텍처

```
      [클라이언트]
           ↓
    [Load Balancer]
     ↙    ↓    ↘
[Auto Scaling Group]
  ├─ [EC2] AZ-A
  ├─ [EC2] AZ-A
  ├─ [EC2] AZ-B
  └─ [EC2] AZ-B

최소: 2대, 희망: 4대, 최대: 10대
```

### 쿨다운 (Cooldown)

**개념**: 조정 활동 후 대기 시간

* 새로운 인스턴스가 안정화될 시간 확보
* 과도한 확장/축소 방지
* 기본값: 300초 (5분)

**예시**
```
12:00 - CPU 급증, 2대 추가
12:05 - 쿨다운 중 (추가 조정 안 함)
12:10 - 쿨다운 완료, 필요 시 추가 조정
```

### 모범 사례

#### 1. 여러 AZ 사용
```yaml
가용 영역: [ap-northeast-2a, ap-northeast-2b, ap-northeast-2c]
이점: 한 AZ 장애 시에도 서비스 유지
```

#### 2. ELB Health Check 활성화
```yaml
Health Check 유형: ELB
이점: 애플리케이션 수준의 정확한 상태 확인
```

#### 3. 적절한 조정 정책 선택
```yaml
예측 가능한 패턴: 예약된 조정
CPU/메모리 기반: 대상 추적 조정
복잡한 조건: 단계 조정
```

#### 4. 시작 템플릿 사용
```yaml
AMI: 최신 보안 패치 적용된 이미지
User Data: 애플리케이션 자동 구성 스크립트
```

### 포인트

* **자동화**: 수동 개입 없이 용량 조정
* **비용 최적화**: 사용량에 따라 비용 지불
* **고가용성**: 자동 장애 복구 및 다중 AZ 배포
* **유연성**: 다양한 조정 정책 조합 가능
* **필수 조합**: ELB + Auto Scaling + 다중 AZ

---

## 🎯 최종 정리

### 네트워크 기초

* **VPC**: AWS 클라우드 내 논리적으로 격리된 가상 네트워크
* **CIDR**: IP 주소 범위를 슬래시 표기법으로 표현 (예: 10.0.0.0/16)
* **서브넷 마스크**: IP 주소를 네트워크와 호스트 부분으로 구분
* **NAT Gateway**: 프라이빗 서브넷의 아웃바운드 인터넷 접속 허용

### 보안 및 방화벽

* **Security Group**: 인스턴스 레벨 방화벽, Stateful, 허용 규칙만 가능
* **NACL**: 서브넷 레벨 방화벽, Stateless, 허용/거부 모두 가능, 규칙 번호 순서대로 평가

### VPC 연결

* **VPC Peering**: VPC 간 프라이빗 연결, CIDR 중복 불가
* **VPN**: 온프레미스-AWS 간 암호화 터널, 빠른 구축, 제한적 대역폭
* **Direct Connect**: 전용 물리적 연결, 고성능, 높은 비용과 긴 구축 시간

### 가용성 및 확장성

* **수직 확장(Scale Up)**: 인스턴스 사양 업그레이드, 재시작 필요, 한계 존재
* **수평 확장(Scale Out)**: 인스턴스 개수 증가, 무중단 확장, 고가용성 확보
* **고가용성**: 다중 AZ 배포 + 리소스 이중화 + 자동 복구

### 로드 밸런싱 및 오토 스케일링

* **ELB**: 트래픽 자동 분산, Health Check로 비정상 대상 제외
* **ALB**: Layer 7 (HTTP/HTTPS), 경로/호스트 기반 라우팅
* **NLB**: Layer 4 (TCP/UDP), 초고성능, 고정 IP
* **Auto Scaling**: 수요에 따라 EC2 자동 확장/축소, 비용 최적화

### 핵심 설계 원칙

* **장애는 발생한다**: 다중 AZ, 이중화, 자동 복구 구성
* **확장성 우선**: 수평 확장 가능한 아키텍처 설계
* **자동화**: ELB + Auto Scaling으로 수동 개입 최소화
* **보안 계층화**: Security Group + NACL 이중 방어
* **모니터링**: CloudWatch로 지표 추적 및 알림 설정