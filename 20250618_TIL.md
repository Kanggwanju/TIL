# 🗓️ 2025년 6월 18일 TIL

## 🎮 UP-DOWN 게임 실습

### 📌 DOM 접근 방식
- 나는 필요한 데이터를 `요소 노드.textContent`를 통해 불러왔음.
- 선생님은 **게임에 필요한 데이터를 하나의 객체**로 묶어 전역에서 관리함.
- 나는 요소 노드를 **패널 설정 함수 내부**에서 정의했지만,
  선생님은 **전역에서 요소 노드들을 정의**하여 일관되게 사용함.

### 📌 입력값 검증
- 나는 범위 내 숫자인지만 체크했지만,
- 선생님은 `isNaN(userGuess)`도 추가해 숫자가 아닌 값도 걸러냄.
```js
isNaN(value) // value가 숫자가 아니면 true
```

* 검증 실패 시 `input.focus()`로 UX 향상 → 바로 다시 입력 가능

### 📌 기록 저장과 UI 처리 방식

* 나는 판정 함수 내부에서 결과에 따라 바로 UI를 변경했음.
* 선생님은 유저의 기록을 `gameData.guessHistory` 배열에 저장 후,
  기록 기반으로 UI를 렌더링함.
  → **데이터 흐름이 명확하고 유지보수가 쉬움**

---

## ⚙️ 게임 흐름 구성

### 🎯 프로그램 구성 흐름
- 사용자 입력
- 입력값 검증
- 기회 차감
- 판정 수행

### 🧠 판정 처리 방식
- **정답인 경우**
    - 정답 메시지 출력 및 UI 업데이트

- **오답인 경우 (UP / DOWN)**
    - 힌트 메시지 출력 (UP / DOWN)
    - 범위 업데이트 (min/max)
    - 자동 정답 체크
    - 게임 오버 처리 (남은 기회 0)
    - UI 업데이트

📌 **자동 정답 처리 조건**
- `최소값 === 최대값` 이고, `남은 기회 > 0`일 때 자동 정답 처리

### 🔁 게임 재시작 처리
- `form.submit()`으로 새로고침하는 방식은 ❌ UX 저하
- 수동 초기화 함수로 게임 상태를 리셋하는 방식이 ✅ 바람직
- 재시작 버튼을 눌렀을 때와 처음 실행 코드에서 초기화 함수 호출

---

## 🔒 사용자 콘솔 접근 방지

* 게임 데이터를 전역 변수로 선언하면, 콘솔에서 값 조작 가능
* 이를 방지하기 위해 \*\*즉시 실행 함수(IIFE)\*\*로 모든 코드 캡슐화

```js
(function () {
  return 100;
})();
```

* 이름이 없기 때문에 외부에서 접근 불가 → 보안과 안정성 확보

---

## 🌐 AJAX & XHR 실습

* XHR - 서버와의 통신을 중개해주는 대행 객체
  `const xhr = new XMLHttpRequest();`

### 📡 사용한 페이크 서버

* `https://jsonplaceholder.typicode.com`

### 📦 주요 리소스 예시

* `/users`, `/posts`, `/comments` 등
  → 실제 API처럼 GET 요청으로 JSON 데이터 제공

### 📌 요청 방식 4가지

1. **GET**: 조회
2. **POST**: 생성
3. **PUT/PATCH**: 수정
4. **DELETE**: 삭제

### 🔄 JSON 데이터 활용

* 서버 응답은 문자열(JSON) 형태
    - JSON: 자바스크립트 객체 표기법
    - JSON != JS
    - 자바스크립트와 다른 점은 키를 "name"처럼 쌍 따옴표를 이용하여 표현.
    - `"title": "qui est esse"`
* 변환 필요:

```js
JSON.parse(jsonString)      // JSON → JS 객체
JSON.stringify(jsObject)    // JS 객체 → JSON 문자열
```

---

## ⏱️ 비동기 처리와 콜백 지옥

* fetchGet을 따로 3번 하면 비동기이므로 내가 원하는 정보를 받을 수 없음
* 서버 응답은 비동기 응답 데이터 사용 → callback 함수로 처리 필요
* 요청이 연속적으로 이어지면 **콜백 중첩** 발생 (콜백 지옥)

```js
// 1. 회원목록 조회
fetchGet(`${url}/users`, (res1) => {
  // 2. 그 중에 두번째 회원이 쓴 게시물 정보를 추가 조회한다.
  fetchGet(`${url}/posts?userId=${res1[1].id}`, (res2) => {
    // 3. 그중 4번째 게시물의 모든 댓글을 가져오고싶다.
    fetchGet(`${url}/comments?postId=${res2[3].id}`, (res3) => {
      console.log(res3);
    });
  });
});
```

> 함수가 중첩될수록 유지보수가 어려움 → 추후 `Promise`, `async/await`로 개선 필요

---

## ⚠️ 보안 주의 사항

* API Key는 절대 깃허브에 업로드하지 말 것 ❗
  → `.env` 파일이나 서버 사이드에서 관리
