# ğŸ—“ï¸ 2025ë…„ 9ì›” 1ì¼ TIL



ë¦¬ì•¡íŠ¸ ì„œë²„ìš”ì²­ í•™ìŠµì„ ìœ„í•œ í”„ë¡œì íŠ¸ ìƒì„±

í”„ë¡ íŠ¸: React, ë°±ì—”ë“œ: Spring Boot
í”„ë¡ íŠ¸ì™€ ë°±ì—”ë“œ ì„œë²„ê°€ ë”°ë¡œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì—
í”„ë¡ íŠ¸ì—ì„œ ë°±ì—”ë“œì— ìš”ì²­ ë„£ìŒ
-> `CORS` ì„¤ì • í•„ìš”

ì „ì—­ í¬ë¡œìŠ¤ì˜¤ë¦¬ì§„ ì„¤ì • : í—ˆìš©í•  í´ë¼ì´ì–¸íŠ¸ë¥¼ ì§€ì •
```java
@Configuration
public class CorsConfig implements WebMvcConfigurer
```

CORS í—ˆìš©(origin) URLì„ ë°°ì—´ë¡œ ê´€ë¦¬ 
```java
private String[] permitUrls = {
        "http://localhost:5173",
        "http://localhost:5174",
        "http://localhost:5175",
};
```

```java
@Override
    public void addCorsMappings(CorsRegistry registry) {
        registry
                .addMapping("/api/**")
                .allowedOrigins(permitUrls)
                .allowedMethods("*")
                .allowedHeaders("*")
                .allowCredentials(true)
        ;

    }
```
- addMapping: í´ë¼ì´ì–¸íŠ¸ì˜ ì–´ë–¤ ìš”ì²­ì„ í—ˆìš©í• ì§€
- allowedOrigins: ì–´ë–¤ Urlì„ í—ˆìš©í• ì§€
- allowedMethods: ì–´ë–¤ ìš”ì²­ë°©ì‹ì„ í—ˆìš©í• ì§€ "GET", "POST" ë“±
- allowedHeaders: ì–´ë–¤ í—¤ë”ë¥¼ í—ˆìš©í• ì§€
- allowCredentials(true): ë³´ì•ˆì¿ í‚¤ë¥¼ í—ˆìš©í• ì§€

---

**í—¬ìŠ¤ ì²´í¬(Health Check) ì—”ë“œí¬ì¸íŠ¸**
- ë°°í¬ëœ API ì„œë²„ê°€ â€œì‚´ì•„ìˆëŠ”ì§€, ì‘ë‹µì´ ê°€ëŠ¥í•œì§€â€ë¥¼ í™•ì¸í•  ë•Œ ì‚¬ìš©
---

## ğŸ“Œ ì½”ë“œ í•´ì„

```java
@RestController
@Slf4j
public class HealthCheckController {

    @GetMapping("/status")
    public ResponseEntity<?> healthCheck() {
        return ResponseEntity.ok(
            Map.of(
                "healthy", true,
                "timestamp", LocalDateTime.now()
            )
        );
    }
}
```

* `/status`ë¡œ GET ìš”ì²­ ì‹œ JSON ì‘ë‹µ:

  ```json
  {
    "healthy": true,
    "timestamp": "2025-09-01T12:34:56.789"
  }
  ```
* `healthy: true` â†’ ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™ ì¤‘ì„ì„ ì•Œë¦¼
* `timestamp` â†’ í˜¸ì¶œ ì‹œì  ê¸°ë¡

---

## ğŸ“Š ì‹¤ë¬´ì—ì„œ ì“°ì„ìƒˆ

1. **ë¡œë“œ ë°¸ëŸ°ì„œ / ì¿ ë²„ë„¤í‹°ìŠ¤**

    * ELB, Nginx, Kubernetes ê°™ì€ ê³³ì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ `/status` í˜¸ì¶œ
    * 200 OKì´ë©´ í—¬ìŠ¤ ìƒíƒœ ì •ìƒ, ì‹¤íŒ¨ë©´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëºŒ

2. **ëª¨ë‹ˆí„°ë§**

    * Prometheus, Grafana ê°™ì€ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì— ë¶™ì—¬ì„œ ì„œë²„ ìƒíƒœ ì²´í¬
    * ì‘ë‹µ ì§€ì—°, ì‹¤íŒ¨ìœ¨ ë“±ì„ ê°ì‹œ

3. **ê°œë°œ/ë””ë²„ê¹…**

    * ê°„ë‹¨íˆ `curl http://localhost:8080/status` í•´ì„œ ì„œë²„ê°€ ëœ¨ëŠ”ì§€ ë°”ë¡œ í™•ì¸ ê°€ëŠ¥


---


loader í•¨ìˆ˜

ë¦¬ì•¡íŠ¸ ê¸°ë³¸ ì‹¤í–‰ ìˆœì„œ
1. ë Œë”ë§ ìˆ˜í–‰
2. ì„œë²„ì—ì„œ ë°ì´í„° í˜ì¹­
3. ìƒíƒœ ë³€ìˆ˜ ë³€ê²½
4. ë‹¤ì‹œ ë Œë”ë§ ìˆ˜í–‰

ë°ì´í„°ë¥¼ ë¨¼ì € ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ -> loader í•¨ìˆ˜ ì‚¬ìš©

loaderëŠ” ë¼ìš°í„°ì—ì„œ ì‘ì„±
loader í•¨ìˆ˜ëŠ” ì–¸ì œ ì‹¤í–‰ë˜ëƒ?
- í˜ì´ì§€ê°€ ë¼ìš°íŒ…ë  ë•Œ ë‹¨ í•œ ë²ˆë§Œ íŠ¸ë¦¬ê±° ë¨

```jsx
{
  path: 'events',
    element: <EventLayout />,
    children: [
    {
      index: true,
      element: <EventPage />,
      loader: async () => {
        const response = await fetch('http://localhost:9000/api/events');
        return await response.json();
      }
    },
    {
      path: ':eventId',
      element: <EventDetailPage />
    }
  ]
}
```


useLoaderData()
loaderê°€ ë¦¬í„´í•œ ë°ì´í„°ëŠ” ë¼ìš°íŒ…ëœ í˜ì´ì§€ì™€
ê·¸ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì–¸ì œë“  ì‚¬ìš©ê°€ëŠ¥

```jsx
// loaderê°€ ë¦¬í„´í•œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
const eventList = useLoaderData();
```

ê·¼ë°, ë¼ìš°í„°ì— ì„œë²„ í†µì‹  ì½”ë“œë¥¼ ì“°ë©´ ë„ˆë¬´ ê¸¸ì–´ì§.
í†µì‹  ì½”ë“œë¥¼ ë¡œë” ì•„ì›ƒì†Œì‹± í•´ì£¼ë©´ ëœë‹¤.
- loaderëŠ” fetch ê²°ê³¼ë¥¼ ë°”ë¡œ ë¦¬í„´í•˜ëŠ” ê²½ìš° ì•Œì•„ì„œ jsonì„ ì¶”ì¶œ





