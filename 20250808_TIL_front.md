# 🗓️ 2025년 8월 8일 프론트엔드 TIL

## 📌 오늘의 핵심 키워드

`실시간 입력 검증` · `중복 체크 API 연동` · `폼 이벤트 처리` · `UI 동적 렌더링` · `공통 인증 모듈` · `로그아웃 처리`

---

## 1. 회원가입 페이지 – 실시간 검증 로직

### 1-1. 사용자명/이메일 실시간 검증

* **`input` 이벤트 + 디바운스(500ms)** 로 서버 부하 최소화.
* 형식 검증 후 → 서버 중복 확인 API 호출 (`GET /api/auth/check-username`, `GET /api/auth/check-email`).
* 응답 메시지와 상태에 따라 UI 스타일(`is-valid` / `is-invalid`)과 메시지 표시.

```javascript
// 사용자명 중복 확인 예시
const checkDuplicateUsername = async (username) => {
  const res = await apiService.get(`/api/auth/check-username?username=${username}`);
  updateInputState(state.$usernameInput, !res.data, res.message);
};
```

### 1-2. 비밀번호 검증

* 길이, 대소문자, 숫자, 특수문자 포함 여부 확인.
* 강도에 따라 메시지 변경 (`매우 강함`, `강함`, `보통`, `약함`).
* 비밀번호 확인란과 비교하여 일치 여부 실시간 검증.

---

## 2. 회원가입 폼 제출 로직

* 모든 필드 최종 검증 (`utils.validateForm`) 후 서버에 `POST /api/auth/signup`.
* 성공 시 성공 메시지 표시 후 2초 뒤 로그인 페이지로 이동.
* 실패 시 에러 메시지 표시.

---

## 3. 로그인 페이지 – 폼 이벤트 처리 & API 연동

* `submit` 이벤트 → 폼 데이터 수집 후 `POST /api/auth/login`.
* 성공 시:

    * 응답 토큰과 사용자 정보(`user`)를 `localStorage`에 저장 (`authService.login`).
    * 메시지 표시 후 홈(`/`)으로 이동.
* 실패 시 에러 메시지 표시.

```javascript
authService.login(response.data.token, JSON.stringify(response.data.user));
```

---

## 4. 홈 페이지 – 인증 상태 기반 UI 렌더링

* `authService.checkAuthStatus()`로 로그인 여부 확인.
* 로그인 상태면 **환영 메시지 + 대시보드 버튼** 표시.
* 비로그인 상태면 **로그인 버튼** 표시.

---

## 5. 공통 인증(auth) 모듈 (`auth.js`)

* **주요 기능**

    * `checkAuthStatus()` → 토큰·유저정보 유무로 로그인 여부 판단.
    * `updateHeaderUI()` → 로그인 상태에 따라 헤더 메뉴 표시/숨김 처리.
    * `login(token, user)` → 로컬스토리지 저장.
    * `logout()` → 로컬스토리지 삭제 후 홈으로 이동.

---

## 6. 로그아웃 이벤트 처리 (`app.js`)

* 모든 페이지 공통으로 `[data-action="logout"]` 클릭 시 `authService.logout()` 실행.
* `header.html`의 **드롭다운 로그아웃 메뉴**에 적용.

---

## 7. 헤더 인증 UI 통합 (`updateHeaderUI`)

* 로그인 상태 → 사용자명 표시 + 로그인 버튼 숨김.
* 로그아웃 상태 → ‘사용자’로 표시 + 로그인 버튼 노출.
* `app.js`에서 페이지 로드 시 항상 실행 → 모든 페이지 헤더 상태 일관성 유지.

---

## 🗂 전체 동작 흐름

1. **회원가입 페이지**

    * 입력 → 형식 검증 → 중복 체크 API 호출 → UI 반영
    * 제출 시 전체 폼 검증 → 회원가입 API 호출
2. **로그인 페이지**

    * 폼 제출 → 로그인 API 호출 → 토큰·유저 저장
    * 저장 후 홈으로 이동 & 헤더 UI 갱신
3. **홈/헤더**

    * 페이지 진입 시 인증 상태 확인 → UI 동적 변경
4. **로그아웃**

    * 클릭 시 인증 정보 삭제 & 홈으로 이동

---

## 💡 오늘 배운 점

* **실시간 검증 + 디바운스**로 UX와 서버 부하를 동시에 고려.
* **공통 모듈화(authService)** 로 인증 관련 로직 중복 제거.
* **UI 동적 변경**으로 로그인/비로그인 상태를 한눈에 구분.
* **페이지별 JS 동적 로드**로 초기 로딩 최적화.

