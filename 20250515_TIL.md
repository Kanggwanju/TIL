# 🗓️ 2025년 5월 15일 TIL

## 🌿 Git Merge

> **브랜치의 변경사항을 병합하고, 새로운 병합 커밋을 생성하는 방식**

### 📌 작동 방식

* 공통 조상 커밋 이후의 이력을 하나로 합친 **새로운 커밋**을 생성
* 기존 브랜치의 커밋 히스토리는 **그대로 유지**

### ✅ 장점

* **히스토리 보존**: 원본 브랜치 히스토리가 유지됨
* **충돌 해결이 명확**: 충돌이 발생해도 병합 커밋에서 해결 가능

### ⚠️ 단점

* **복잡한 히스토리**: 여러 브랜치 병합 시 커밋 히스토리가 복잡해짐

---

## 🌱 Git Rebase

> **브랜치의 커밋들을 다른 브랜치의 끝으로 옮겨서 히스토리를 선형으로 만드는 방법**

### 📌 작동 방식

```bash
git checkout feature-branch
git rebase main
```

* `feature-branch`의 커밋을 `main` 브랜치 끝에 **순차적으로 재적용**
* 히스토리를 다시 쓰기 때문에 깔끔한 커밋 구조를 만듦

### ✅ 장점

* **선형 히스토리**: 커밋 기록이 한 줄로 이어져 분석·디버깅이 쉬움
* **깔끔한 흐름**: 커밋 순서가 명확해 작업 흐름 파악이 쉬움

### ⚠️ 단점

* **공유 브랜치에서 사용 금지**: 히스토리 재작성으로 팀원과 충돌 가능
* **복잡한 충돌 해결**: 커밋마다 충돌 해결해야 하는 경우 있음

---

### ❌ Rebase를 사용하면 안 되는 상황

1. **공개된 브랜치에서**

   * 다른 사람과 공유된 히스토리를 변경하면 충돌 및 혼란 발생

2. **협업 브랜치에서**

   * 여러 개발자가 작업 중일 때 히스토리 일치 문제 발생

---

### 🔧 Rebase 충돌 해결 방법

```bash
git status              # 충돌 확인
# 충돌 수정 후
git add .
git rebase --continue   # 계속 진행

# 또는
git rebase --abort      # 리베이스 중단
```

---

## ✨ Git Interactive Rebase

> 커밋 히스토리를 **수정 / 정리 / 합치기 / 삭제**할 수 있는 강력한 도구

### ✅ 사용 방법

```bash
git rebase -i HEAD~5   # 최근 5개 커밋 수정
```

실행 시 텍스트 편집기가 열리며 다음과 같은 형식의 리스트를 보여줌:

```bash
pick 3f5e4c8 Add feature X
pick 2d4f5c7 Fix bug Y
pick b2d4e5f Improve documentation
```

### ✍️ 주요 명령어

| 명령어      | 설명                    |
| -------- | --------------------- |
| `pick`   | 커밋을 그대로 유지            |
| `reword` | 커밋 메시지 수정             |
| `edit`   | 커밋 내용 수정              |
| `squash` | 이전 커밋과 병합 (메시지 조정 가능) |
| `fixup`  | 이전 커밋과 병합 (메시지 무시)    |
| `drop`   | 커밋 삭제                 |

🛑 공유 브랜치에서는 신중하게 사용해야 하며, push 전에 히스토리를 정리하는 용도로 활용하는 것이 좋음.

---

## 🍒 Git Cherry-Pick

> 특정 커밋 하나만 **골라서 현재 브랜치에 적용**하는 기능

### 🛠️ 사용 예시

```bash
git cherry-pick abc123            # 특정 커밋 적용
git cherry-pick abc123 def456     # 여러 커밋 적용
git cherry-pick a1b2c3..d4e5f6    # 범위 지정
```

### 🧰 언제 사용하나요?

* 다른 브랜치의 **버그 수정** 커밋만 가져올 때
* 특정 기능 커밋만 적용하고 싶을 때

### ✅ 장점

* 필요한 커밋만 가져올 수 있는 **유연함**
* 전체 병합 없이 부분적인 변경사항 적용 가능

### ⚠️ 단점

* 커밋 해시가 달라져 **히스토리가 복잡**해질 수 있음
* 충돌 발생 시 해결이 필요
* 팀 협업에서 **중복 적용**이나 혼란 발생 가능

### 🛠️ 충돌 해결 시

```bash
# 충돌 수정 후
git add .
git cherry-pick --continue

# 또는
git cherry-pick --abort  # 중단
```

---

### 🍒 Cherry-Pick vs Merge vs Rebase

| 기능              | 특징                         | 사용 시점               |
| --------------- | -------------------------- | ------------------- |
| **Cherry-Pick** | 특정 커밋만 적용, 해시 변경           | 필요한 커밋만 뽑아올 때       |
| **Merge**       | 브랜치 전체 병합, 커밋 보존, 병합 커밋 생성 | 전체 변경사항을 통합하고 싶을 때  |
| **Rebase**      | 커밋 재적용, 히스토리 선형화           | 히스토리를 깔끔하게 만들고 싶을 때 |

---

## 🔁 Git Reflog

> **HEAD와 브랜치가 이동한 모든 기록을 시간순으로 보여주는 로그**

### 📌 주요 사용 예시

| 상황           | 방법                                   |
| ------------ | ------------------------------------ |
| 이전 커밋으로 되돌리기 | `git reset --hard HEAD@{1}`          |
| 특정 날짜로 돌아가기  | `git reset --hard HEAD@{3.days.ago}` |
| 브랜치 이동 내역 추적 | `git reflog`, `branch@{n}`           |

### ✅ 장점

* 실수로 커밋 삭제, 브랜치 리셋했을 때 복구 가능
* 과거 HEAD 위치 확인으로 **복원력 향상**

### ⚠️ 한계

* **로컬에서만 유효** (원격 저장소와는 무관)
* **영구적이지 않음**: 기본적으로 약 90일 보관

---

## ✅ 마무리 요약

| 개념                 | 목적                 | 주의 사항                 |
| ------------------ | ------------------ | --------------------- |
| Merge              | 브랜치 병합             | 히스토리 복잡해질 수 있음        |
| Rebase             | 히스토리 선형화           | 공유 브랜치에서 사용 주의        |
| Interactive Rebase | 커밋 정리 및 수정         | 협업 전 정리할 때 유용         |
| Cherry-Pick        | 특정 커밋만 가져오기        | 커밋 해시 변경 → 히스토리 복잡 주의 |
| Reflog             | HEAD 이동 기록 확인 및 복구 | 로컬에서만 가능, 오래되면 삭제됨    |

