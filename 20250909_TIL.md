# ğŸ—“ï¸ 2025ë…„ 9ì›” 9ì¼ TIL


## ì˜¤ëŠ˜ì˜ í‚¤ì›Œë“œ

* React.memo
* ì»´í¬ë„ŒíŠ¸í™”
* useCallback
* key props
* useState ì´ˆê¸°ê°’
* Zustand
* Zustand persist

---

## ë¦¬ì•¡íŠ¸ ì„±ëŠ¥ ìµœì í™” í…Œí¬ë‹‰

## 1. React.memo

ì¹´ìš´í„°ì— ìˆ«ìë¥¼ ì…ë ¥ ë“±ì˜ ë™ì‘ì„ í–ˆëŠ”ë°, ê¸€ìë§Œ ì¨ì ¸ìˆëŠ”
í—¤ë”ëŠ” ë¦¬ë Œë”ë§ í•  í•„ìš”ê°€ ì—†ì§€ë§Œ, ë¦¬ë Œë”ë§ ë¨.

ê°•ì œë¡œ ë¦¬ë Œë”ë§ í•˜ì§€ ëª»í•˜ê²Œ í•˜ëŠ” React.memo

```jsx
const Header = () => {
  return (
    <header id='main-header'>
      <h1>React Optimizing</h1>
    </header>
  );
};
export default React.memo(Header);
```

---

## 2. ì»´í¬ë„ŒíŠ¸í™”
- ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ ì¹´ìš´í„°ë¥¼ ì»´í¬ë„ŒíŠ¸ë¡œ ë”°ë¡œ ë¶„ë¦¬
- ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€, `memo` ë³´ë‹¤ ì¶”ì²œë˜ëŠ” ë°©ì‹, ì˜ê²Œ ìª¼ê°œëŠ”ê²Œ ì¤‘ìš”
- ì´ì „ì—ëŠ” Appì—ì„œ ìƒíƒœë³€ìˆ˜ê°€ ë³€ê²½ë˜ì–´ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë¦¬ë Œë”ë§
- `ConfigureCounter` ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ìƒíƒœê°€ ë³€ê²½ë˜ë©´ì„œ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë§Œ ë¦¬ë Œë”ë§  
```jsx
const App = () => {
  // ...
  return (
    <>
      <Header />
      <main>
        <ConfigureCounter onSet={setCounterHandler} />
        <Counter initialCount={chosenCount} />
      </main>
    </>
  );
};
```

---

## 3. useCallback
- ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë˜ë©´, ì»´í¬ë„ŒíŠ¸ ë‚´ì— ì •ì˜ëœ ëª¨ë“  í•¨ìˆ˜ë“¤ë„ ë‹¤ì‹œ ìƒì„±
- `useCallback`ì„ ì‚¬ìš©í•˜ì—¬ í•¨ìˆ˜ ì¬ìƒì„± ë°©ì§€
- ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš©ì‹œ ì„±ëŠ¥ ì €í•˜

### ê¸°ì¡´
```jsx
const decrementHandler = () => {
  setCounter((prevCounter) => prevCounter - 1);
};

const incrementHandler = () => {
  setCounter((prevCounter) => prevCounter + 1);
};
```

### useCallback ì‚¬ìš©
```jsx
const decrementHandler = useCallback(() => {
  setCounter((prevCounter) => prevCounter - 1);
}, []);

const incrementHandler = useCallback(() => {
  setCounter((prevCounter) => prevCounter + 1);
}, []);
```

---

## 4. key props
- key propsë¥¼ ë™ì ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ë¦¬ë Œë”ë§ì´ ì˜ëª» ì¼ì–´ë‚˜ëŠ” ë¬¸ì œ ë°œìƒ
- keyëŠ” í•­ìƒ ê³ ì •ê°’ìœ¼ë¡œ ì„¤ì •

---

## 5. useState ì´ˆê¸°ê°’
- ì¼ë°˜ì ì¸ ë¦¬ë Œë”ë§ì€ ìƒíƒœê°’ì´ ë³€í•˜ì§€ ì•ŠìŒ
- í•˜ì§€ë§Œ key ê°’ì´ ë³€ê²½ë˜ëŠ” ë¦¬ë Œë”ë§ì€ ìƒíƒœê°’ì´ ì´ˆê¸°ê°’ìœ¼ë¡œ ë³€ê²½ë¨.

ì»´í¬ë„ŒíŠ¸ì— í‚¤ ì†ì„±ì„ ë„£ì–´ì¤Œ, chosenCountëŠ” ì…ë ¥ìœ¼ë¡œ ë³€ê²½ë˜ëŠ” ê°’
```jsx
const App = () => {
  // ...
  return (
    <>
      <Header />
      <main>
        <ConfigureCounter onSet={setCounterHandler} />
        <Counter key={chosenCount} initialCount={chosenCount} />
      </main>
    </>
  );
};
```

í‚¤ê°€ ë³€ê²½ -> ìƒíƒœê°’ì´ ì´ˆê¸°ê°’ìœ¼ë¡œ ë³€ê²½
í•˜ì§€ë§Œ, í‚¤ì™€ í”„ë¡­ìŠ¤ê°€ ë™ì¼, ë‚´ê°€ ì •í•œ ì´ˆê¸°ê°’ìœ¼ë¡œ ë°”ê¿”ì¤Œ
- í‚¤ ë³€ê²½ ë§ê³ ë„ useEffect ì‚¬ìš©ë„ ê°€ëŠ¥
```jsx
const Counter = ({ initialCount }) => {
  log('<Counter /> rendered', 1);

  const initialCountIsPrime = isPrime(initialCount);

  const [counterChanges, setCounterChanges]
    = useState([{id: Math.random().toString(), value: initialCount}]);

// useEffect(() => {
//   setCounterChanges([{id: Math.random().toString(), value: initialCount}]);
// }, [initialCount]);
  
};
```

---

## Zustand ê°œë…
- ì „ì—­ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

1. Provider ë¶ˆí•„ìš”
  - Contextì²˜ëŸ¼ íŠ¸ë¦¬ ìƒë‹¨ì— Providerë¥¼ ë‘ì§€ ì•Šì•„ë„ ë¨
  - ì „ì—­ ìŠ¤í† ì–´(ê°€ê²Œì˜ ë³¸ì‚¬ ì°½ê³ )ë¥¼ ë§Œë“¤ê³ , ì»´í¬ë„ŒíŠ¸ëŠ” í›…ìœ¼ë¡œ í•„ìš”í•œ ì¬ê³ ë§Œ êº¼ë‚´ ì”€

2. ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ìµœì†Œí™”
  - reducer, action type ì—†ì´ ê°„ê²°í•œ API(`create`, `set`)

3. ë¯¸ë“¤ì›¨ì–´ ì§€ì›
  - persist(ë³´ê´€í•¨), devtools(CCTV), immer(ì•ˆì „ ì‘ì—…ëŒ€)
  - ì‹¤ì „ì—ì„œ ìœ ìš©í•œ ë„êµ¬ë“¤ì„ ë°”ë¡œ ì–¹ì„ ìˆ˜ ìˆìŒ

## Context APIì™€ì˜ ë¹„êµ(í•µì‹¬ í¬ì¸íŠ¸)

1. êµ¬ì„± ë°©ì‹
  - Context: Provider íŠ¸ë¦¬ ì„¤ê³„ê°€ í•„ìš”, ë²”ìœ„ë¥¼ ë‚˜ëˆ„ë ¤ë©´ ë‹¤ì¤‘ Provider ì„¤ê³„ë„ í•„ìš”
  - Zustand: Provider ì—†ì´ ëª¨ë“ˆ í•˜ë‚˜ë¡œ ì „ì—­ ìŠ¤í† ì–´ êµ¬ì„±

2. ë¦¬ë Œë”ë§


### Zustand ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
```shell
npm install zustand
```

---


### Zustand ì¤‘ì•™ ìƒíƒœ ì €ì¥ì†Œ
- ìƒì„±
```js
// counterStore.js
import {create} from 'zustand';

// ì¤‘ì•™ ìƒíƒœ ì €ì¥ì†Œ ìƒì„±
export const useCounterStore
  = create((set) => ({

  // ì „ì—­ ê´€ë¦¬í•  ìƒíƒœê°’ë“¤ì„ ë°°ì¹˜
  count: 99,
  showCounter: true
}));
```
íŒ: ê°ì²´ ë¦¬í„´ì„ í•˜ë ¤ë©´ ì¤‘ê´„í˜¸ë¥¼ ì†Œê´„í˜¸ë¡œ ë¬¶ìœ¼ë©´ ëœë‹¤!


- ìƒíƒœ êµ¬ë…(ì‚¬ìš©)
  - useCounterStoreì— ìƒíƒœê°’ì´ ë“¤ì–´ìˆê³  ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥
```jsx
const { count, showCounter } = useCounterStore();
```


### Zustand ì•¡ì…˜í•¨ìˆ˜

1. ì•¡ì…˜í•¨ìˆ˜ ì„¤ì •
- ìƒíƒœê°’ì„ ë³€ê²½í•˜ëŠ” ì•¡ì…˜í•¨ìˆ˜ë“¤ì„ ê°ì²´ í˜•íƒœë¡œ ë°°ì¹˜
- set í•¨ìˆ˜ë¡œ ìƒíƒœê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆìŒ
- ì½œë°±ì˜ íŒŒë¼ë¯¸í„° stateëŠ” ì´ì „ìƒíƒœê°’ ëª¨ìŒ ê°ì²´ë¥¼ ì˜ë¯¸

```js
export const useCounterStore
  = create((set) => ({

  count: 0,
  showCounter: true,
  
  increment: () => set((state) => ({ count: state.count + 1 })),
  decrement: () => set((state) => ({ count: state.count - 1 })),
  multiply: (amount) => set((state) => ({ count: state.count * amount })),
  toggle: () => set((state) => ({ showCounter: !state.showCounter })),
}));
```

2. ì•¡ì…˜í•¨ìˆ˜ ì‚¬ìš©
```jsx
// ZustandCounter.jsx
// ìƒíƒœ êµ¬ë…
const { count, showCounter, increment, decrement, multiply, toggle } = useCounterStore();

return (
    // ...
    <button onClick={increment}>Increment</button>
    <button onClick={decrement}>Decrement</button>
    <button onClick={() => multiply(3)}>Ã—3</button>
    // ...
    <button onClick={toggle}>Toggle Counter</button>
);
```

---

### ìƒíƒœ ì˜ì†í™” (persist)
- Zustandì˜ `persist` ë¯¸ë“¤ì›¨ì–´ëŠ” íŠ¹ì • ìƒíƒœë¥¼ ì €ì¥/ë³µì›
- ì˜ˆ) ë¡œê·¸ì¸ ì—¬ë¶€, ì‚¬ìš©ì í™˜ê²½ ì„¤ì •(ë‹¤í¬ ëª¨ë“œ, ì–¸ì–´)
- ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì •ë³´ ì €ì¥
- ì£¼ì˜ì ì€ ë¯¼ê°ì •ë³´ ì €ì¥í•˜ì§€ ë§ ê²ƒ

ì¸ì¦ ê´€ë ¨ ìƒíƒœê°’ ì¤‘ì•™ ì €ì¥ì†Œ
```js
// counterStore.js
export const useAuthStore = create(
  persist((set) => ({

    // ê´€ë¦¬í•  ìƒíƒœê°’
    isLoggedIn: false,

    // ìƒíƒœë³€ê²½ í•¨ìˆ˜ (ì•¡ì…˜ í•¨ìˆ˜)
    login: () => set(() => {
      return ({isLoggedIn: true});
    }),
    logout: () => set(() => ({ isLoggedIn: false })),
  }),
    {
      name: 'auth', // localStorage Key
      // ì ˆëŒ€ ë¯¼ê°ì •ë³´ (ex - token) ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ë©´ ì•ˆë¨
      partialize: (state) => ({ isLoggedIn: state.isLoggedIn })
    })
);
```

---

## ğŸ“Œ ì˜¤ëŠ˜ì˜ ìš”ì•½

* **ë¦¬ì•¡íŠ¸ ì„±ëŠ¥ ìµœì í™”**: **ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬**ë¡œ ìƒíƒœ ë³€í™”ì˜ ì˜í–¥ì„ ë°›ëŠ” ë²”ìœ„ë¥¼ ìµœì†Œí™”
  `React.memo`, `useCallback`ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ë°©ì§€
* `Zustand`: `Provider` ì—†ì´ ê°„ê²°í•˜ê²Œ ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ ,
  `persist` ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ ìƒíƒœë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ ê°€ëŠ¥
* `key` props: ë¦¬ë Œë”ë§ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•­ìƒ ê³ ì •ê°’ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•¨

