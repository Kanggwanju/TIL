# ğŸ—“ï¸ 2025ë…„ 7ì›” 14ì¼ TIL

ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜
@RequestParam
? ë’¤ì— ìˆëŠ” ê°’ì„ ì½ìŒ

ê²½ë¡œë³€ìˆ˜
@PathVariable
?ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  /144/1222ê°™ì´ ê²½ë¡œë¥¼ ì‚¬ìš©í•´ì„œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©



```java
@GetMapping("/{id}")
public Product getProduct(@PathVariable("id") long id) {
    return productMap.get(id);
}
```

@GetMapping("/{id}"), idëŠ” ê³„ì† ë³€í•˜ëŠ” ê°’

íŒŒë¼ë¯¸í„° long idì™€ ê²Ÿí•‘ì˜ {} ì•ˆì— ìˆëŠ” ë³€ìˆ˜ ì´ë¦„ì´ ê°™ë‹¤ë©´
("id")ì„ ìƒëµ ê°€ëŠ¥
localhost:9000/products/1    -> 1ë²ˆ ìƒí’ˆ ì¡°íšŒ
[

ìš”ì²­ ë©”ì„œë“œ ì²˜ë¦¬
- HTTP ë©”ì„œë“œëŠ” ì„ ì •ì˜
- Spring MVCì—ì„œëŠ” ì´ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ @GetMapping, @PostMapping, @PutMapping, @DeleteMapping ë“±ì˜ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©

ì£¼ìš” HTTP ë©”ì„œë“œ ë° ìš©ë„
1. GET
- ë°ì´í„°ë¥¼ ì„œë²„ì—ì„œ ì¡°íšŒí•˜ê¸° ìœ„í•œ ìš”ì²­
- ì„œë²„ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŒ
- **ìºì‹±**ì´ ê°€ëŠ¥í•˜ì—¬ ìì£¼ ì‚¬ìš©ë¨
2. POST
- ë°ì´í„°ë¥¼ ì„œë²„ì— ìƒì„±í•˜ê±°ë‚˜ ì „ì†¡í•˜ê¸° ìœ„í•œ ìš”ì²­
- ì¼ë°˜ì ìœ¼ë¡œ í¼ ì œì¶œ, ìƒˆ ë°ì´í„° ìƒì„± ë“±ì— ì‚¬ìš©
3. PUT - ì „ì²´ ìˆ˜ì • / PATCH - ì¼ë¶€ ìˆ˜ì •
- ë°ì´í„°ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ì „ì²´ë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•œ ìš”ì²­
- ì£¼ë¡œ ë¦¬ì†ŒìŠ¤ ì—…ë°ì´íŠ¸ ì‘ì—…ì— ì‚¬ìš©
4. DELETE
- ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•œ ìš”ì²­


DBë¥¼ ë§Œë“¤ ë•Œ ê°ì²´ë¥¼ ìœ ì¼í•˜ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” ì‹ë³„ìê°€ ìˆìœ¼ë©´ ì¢‹ìŒ
private Long id; 
idë¥¼ Long íƒ€ì…ìœ¼ë¡œ ì •í•œ ì´ìœ ëŠ” ê¸°ë³¸ê°’ìœ¼ë¡œ nullì„ ì£¼ê¸° ìœ„í•¨
nullê³¼ 0ì˜ì°¨ì´ : nullì€ ê°€ê²©ìì²´ê°€ ì„¤ì •ì´ ì•ˆëœê²ƒ, 0ì€ ê·¸ëƒ¥ 0ì›




BookController2_4
ëª©ë¡ ì¡°íšŒ

?sort=[ id | title | price ]
- ê¸°ë³¸ê°’ì€ id ì˜¤ë¦„ì°¨, titleì€ ê°€ë‚˜ë‹¤ìˆœ, priceëŠ” ë‚´ë¦¼ì°¨

```java
//    @RequestMapping(method = RequestMethod.GET)
    @GetMapping
    public Map<String, Object> list(@RequestParam(defaultValue = "id") String sort) {
    
        List<Book> bookList = new ArrayList<>(bookStore.values())
            .stream()
            .sorted(getComparator(sort))
            .collect(Collectors.toList());

        int count = bookStore.size();

        return Map.of(
            "count", count,
            "bookList", bookList
        );
    }
```

@RequestParam(defaultValue = "id") String sort
GETë°©ì‹ìœ¼ë¡œ í•´ë‹¹ ë©”ì„œë“œë¥¼ ì‹¤í–‰ì‹œí‚¬ ë•Œ ì•„ë¬´ê²ƒë„ ì…ë ¥í•˜ì§€
ì•Šì•„ë„ ê¸°ë³¸ì€ sort=idê°€ ë˜ê²Œë” ë§Œë“¤ì–´ì¤Œ



bookStore.values()
bookStoreì˜ íƒ€ì…ì€ Map<Long, Book>ìœ¼ë¡œ
í‚¤ê°€ id ê°’ì´ê³ , ê°’ì´ Book ê°ì²´ì´ë‹¤.
bookStore.values()ì„ í•˜ë©´ ê°’ë“¤ì´ ë°˜í™˜ë˜ë©°,
ì´ ê°’ë“¤ì„ ì´ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ì¤Œ.


.sorted(getComparator(sort))
GET ë°©ì‹ìœ¼ë¡œ ì–»ì€ sort ê°’ì„ getComparator ë©”ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì–´ì¤Œ.
getComparatorëŠ” sort ê°’ì— ë”°ë¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì •ë ¬ì„ ì‹¤í–‰
ê²°ê³¼ë¬¼ì€ Listë¡œ ë¬¶ì–´ì¤¬ìŒ.
Map.ofë¥¼ ë¦¬í„´í•˜ì—¬ JSON ê°ì²´ë¥¼ ë¦¬í„´í•˜ëŠ” íš¨ê³¼ë¥¼ ê°€ì ¸ì˜´.


ë„ì„œ ìƒì„±
ë„ì„œ ìƒì„±ì„ í•  ë•ŒëŠ” PostMapping ë°©ì‹ì´ë¯€ë¡œ ì›¹ì‚¬ì´íŠ¸ì˜
URLì„ í†µí•´ ì‹¤í–‰í•  ìˆ˜ ì—†ë‹¤.

í„°ë¯¸ë„ì„ í†µí•´ ì‹¤í–‰ ê°€ëŠ¥
curl.exe -X POST "http://localhost:9000/api/v2-4/books" -d "title=ì„œìœ ê¸°&author=ì†ì˜¤ê³µ&price=1000"


ë„ì„œ ìˆ˜ì •
```java
@PutMapping("/{id}")
public String updateBook(
        String title,
        String author,
        int price,
        @PathVariable Long id
) {
    Book foundBook = bookStore.get(id);


    if (foundBook == null) {
        return id + "ë²ˆ ë„ì„œëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
    }

    foundBook.updateBookInfo(title, author, price);
    return "ë„ì„œ ìˆ˜ì • ì™„ë£Œ: id - " + id;
}
```

ë„ì„œ ìˆ˜ì •ë„ PUT í˜•ì‹ì´ê¸° ë•Œë¬¸ì— URLì„ í†µí•´ì„œ ì‹¤í–‰ ë¶ˆê°€ëŠ¥
curl.exe -X PUT "http://localhost:9000/api/v2-4/books/2" -d "title=ì‚°&author=íŒì£¼&price=111"
-> idê°€ 2ì¸ ë„ì„œë¥¼ ì œëª© ì‚°, ì €ì íŒì£¼, ê°€ê²© 111ë¡œ ë³€ê²½

updateBookInfoëŠ” Book í´ë˜ìŠ¤ê°€ ê°€ì§€ê³  ìˆëŠ” ë©”ì„œë“œë¡œì„œ
Book ê°ì²´ì˜ ì •ë³´ë¥¼ ë³€ê²½í•´ì¤Œ



ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë‹¤ì–‘í•œ ë°ì´í„° ì‘ë‹µ
```java
// í˜ì´ì§€ ë¼ìš°íŒ… - íŠ¹ì • ë·° (JSP, thymeleaf)ë¥¼ í¬ì›Œë”© í•´ì£¼ëŠ” ê²ƒ
@GetMapping("/book-page")
public String bookPage() {
    return "book-page";
}
```

```java
// í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°ì´í„° ì‘ë‹µ
// html ì‘ë‹µ
@GetMapping("/show/html")
@ResponseBody // ìˆœìˆ˜ ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬
public String html() {
    return """
            <html>
            <body>
                <h1>HTML ì‘ë‹µí•˜ê¸°</h1>
            </body>
            </html>
        """;
}

```



ë§ˆì„íƒ€ì…
```java
// ìˆœìˆ˜ í…ìŠ¤íŠ¸ ì‘ë‹µí•˜ê¸°
@GetMapping(value = "/show/text", produces = "text/plain")
@ResponseBody // 2ê°€ì§€ : JSONì´ê±°ë‚˜ HTML
public String text() {
    return "í•˜ì´ ë‚œ ë¬¸ìì•¼~~";
}
```
ResponseBodyëŠ” JSONì´ê±°ë‚˜ HTMLìœ¼ë¡œ ë¶„ë¥˜í•´ì„œ ë³´ë‚¸ë‹¤.
ìœ„ì˜ ë¬¸ìì—´ì€ HTMLìœ¼ë¡œ ë¶„ë¥˜ë¨.
ë”°ë¼ì„œ í…ìŠ¤íŠ¸ë§Œ ë³´ë‚¼ ë•ŒëŠ” í…ìŠ¤íŠ¸ì„ì„ GetMappingì˜ íŒŒë¼ë¯¸í„°ë¥¼
ì´ìš©í•´ì„œ ë§ˆì„íƒ€ì…ì„ ë°í˜
ì‹¤ë¬´ì—ì„œëŠ” ë¬´ì¡°ê±´ JSONìœ¼ë¡œë§Œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì.


```java
// JSON ë°°ì—´ ì‘ë‹µ - ìë°” ë°°ì—´ì´ë‚˜ ë¦¬ìŠ¤íŠ¸, ì…‹
@GetMapping("/json/array")
@ResponseBody
public List<String> hobbies() {
    return List.of("í…Œë‹ˆìŠ¤", "ìˆ˜í•™ë¬¸ì œí’€ê¸°", "íƒêµ¬");
}
```

```java
// JSON ê°ì²´ ì‘ë‹µ - ìë°”ì˜ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤(ê°ì²´) or Map
@GetMapping("/json/object")
@ResponseBody
public Map<String, Object> myPet() {
    return Map.of(
        "name", "ì•¼ì˜¹ì´",
        "age", 3,
        "kind", "ì½”ìˆ"
    );
}
```

```java
@GetMapping("/json/object2")
@ResponseBody
public Pet myPet2() {
    return new Pet("ëƒ¥ëƒ¥ì´", 5, "í˜ë¥´ì‹œì•ˆ", true);
}
```

```java
@GetMapping("/json/object3")
@ResponseBody
public List<Pet> myPet3() {
    return List.of(
        new Pet("ëƒ¥ëƒ¥ì´1", 5, "í˜ë¥´ì‹œì•ˆ", true),
        new Pet("ëƒ¥ëƒ¥ì´2", 7, "í˜ë¥´ì‹œì•ˆ2", false),
        new Pet("ëƒ¥ëƒ¥ì´3", 6, "í˜ë¥´ì‹œì•ˆ3", true),
        new Pet("ëƒ¥ëƒ¥ì´4", 8, "í˜ë¥´ì‹œì•ˆ4", false)
    );
}
```


