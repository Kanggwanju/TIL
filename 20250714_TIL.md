# ğŸ—“ï¸ 2025ë…„ 7ì›” 14ì¼ TIL

## ğŸŒ ìš”ì²­ ì •ë³´ ì „ë‹¬ ë°©ë²•

### âœ… 1. ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ (`@RequestParam`)

* URLì˜ `?` ë’¤ì— ì˜¤ëŠ” ê°’ì„ ì½ìŒ
* ì˜ˆ: `/products?sort=price`

```java
@GetMapping("/products")
public Product getProduct(@RequestParam("sort") String sort) { ... }
```

### âœ… 2. ê²½ë¡œ ë³€ìˆ˜ (`@PathVariable`)

* URL ê²½ë¡œì— ì§ì ‘ ê°’ì„ ë„£ìŒ
* ì˜ˆ: `/products/1` â†’ id = 1

```java
@GetMapping("/{id}")
public Product getProduct(@PathVariable long id) {
    return productMap.get(id);
}
```

```
ğŸ“ ë³€ìˆ˜ëª…ì´ ê°™ë‹¤ë©´ `@PathVariable("id")` â†’ `@PathVariable` ìƒëµ ê°€ëŠ¥
ğŸ§ª ì˜ˆì‹œ: `localhost:9000/products/1` â†’ 1ë²ˆ ìƒí’ˆ ì¡°íšŒ
```

---

## ğŸš¦ HTTP ìš”ì²­ ë©”ì„œë“œ ì •ë¦¬


* í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ ì‘ì—… ìœ í˜•


| ë©”ì„œë“œ    | ì—­í•      | íŠ¹ì§•                   |
| ------ | ------ | -------------------- |
| GET    | ë°ì´í„° ì¡°íšŒ | ìƒíƒœ ë³€ê²½ ì—†ìŒ, ìºì‹± ê°€ëŠ¥      |
| POST   | ë°ì´í„° ìƒì„± | í¼ ì œì¶œ, DBì— ìƒˆ ë°ì´í„° ë“±ë¡ ë“± |
| PUT    | ì „ì²´ ìˆ˜ì •  | ë¦¬ì†ŒìŠ¤ ì „ì²´ë¥¼ ëŒ€ì²´           |
| PATCH  | ì¼ë¶€ ìˆ˜ì •  | íŠ¹ì • í•„ë“œë§Œ ë³€ê²½            |
| DELETE | ë°ì´í„° ì‚­ì œ | ë¦¬ì†ŒìŠ¤ ì œê±° ìš”ì²­            |

---

## ğŸ§  `@RequestParam`ì˜ ê¸°ë³¸ê°’ ì‚¬ìš©

```java
@GetMapping
public Map<String, Object> list(@RequestParam(defaultValue = "id") String sort) {
    ...
}
```

* ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ \`sort = "id"\`ë¡œ ì„¤ì •ë¨
* ì˜ˆ: \`/books\` â†’ \`/books?sort=id\`ë¡œ ì²˜ë¦¬ë¨

---

## ğŸ“˜ BookController2\_4 ì£¼ìš” ê¸°ëŠ¥

### 1. ğŸ“‘ ëª©ë¡ ì¡°íšŒ (ì •ë ¬ ê¸°ëŠ¥ í¬í•¨)

#### ğŸ”¹ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°: \`?sort=id | title | price\`

* \`id\`: ê¸°ë³¸ê°’ (ì˜¤ë¦„ì°¨ìˆœ)

* \`title\`: ê°€ë‚˜ë‹¤ìˆœ&#x20;

* \`price\`: ë‚´ë¦¼ì°¨ìˆœ

```java
@GetMapping
public Map<String, Object> list(@RequestParam(defaultValue = "id") String sort) {
    List<Book> bookList = new ArrayList<>(bookStore.values())
        .stream()
        .sorted(getComparator(sort))
        .collect(Collectors.toList());

    int count = bookStore.size();

    return Map.of(
        "count", count,
        "bookList", bookList
    );
}
```


* `bookStore`: `Map<Long, Book>` í˜•íƒœ
* `bookStore.values()` â†’ ëª¨ë“  Book ê°ì²´ ëª©ë¡
* `getComparator(sort)` â†’ ì •ë ¬ ì¡°ê±´ì— ë”°ë¥¸ Comparator ë¦¬í„´
* `Map.of(...)` â†’ JSON í˜•íƒœë¡œ ì‘ë‹µë¨


---

### 2. âœï¸ ë„ì„œ ìƒì„± (POST ë°©ì‹)

* HTMLì—ì„œëŠ” ì§ì ‘ ì‹¤í–‰ ë¶ˆê°€
* Postman ë˜ëŠ” `curl` ì‚¬ìš©

```bash
curl.exe -X POST "http://localhost:9000/api/v2-4/books" -d "title=ì„œìœ ê¸°&author=ì†ì˜¤ê³µ&price=1000"
```

---

### 3. ğŸ› ï¸ ë„ì„œ ìˆ˜ì • (PUT ë°©ì‹)

```java
@PutMapping("/{id}")
public String updateBook(
    String title,
    String author,
    int price,
    @PathVariable Long id
) {
    Book foundBook = bookStore.get(id);
    if (foundBook == null) {
        return id + "ë²ˆ ë„ì„œëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
    }

    foundBook.updateBookInfo(title, author, price);
    return "ë„ì„œ ìˆ˜ì • ì™„ë£Œ: id - " + id;
}
```


* URLë¡œëŠ” ì‹¤í–‰ ë¶ˆê°€ â†’ `curl` ì‚¬ìš©

```bash
curl.exe -X PUT "http://localhost:9000/api/v2-4/books/2" -d "title=&author=íŒì£¼&price=111"
```

* `updateBookInfo(...)`: `Book` í´ë˜ìŠ¤ ë‚´ë¶€ ë©”ì„œë“œë¡œ ì •ë³´ ìˆ˜ì • ìˆ˜í–‰


---

## ğŸ§© ê¸°íƒ€ ê°œë… ì •ë¦¬

### ğŸ”¸ `Long id`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

* `Long`ì€ `null`ì„ í—ˆìš© â†’ ê°’ì´ ì•„ì˜ˆ ì—†ëŠ” ìƒíƒœ í‘œí˜„ ê°€ëŠ¥
* `0`ì€ ìˆ«ì 0ì¼ ë¿ â†’ ì˜ë¯¸ ìˆìŒ

---

## ğŸ§­ ë‹¤ì–‘í•œ ë°©ì‹ì˜ ë°ì´í„° ì‘ë‹µ

### ğŸ”¹ 1. í˜ì´ì§€ - íŠ¹ì • ë·° (JSP, thymeleaf)ë¥¼ í¬ì›Œë”©

```java
@GetMapping("/book-page")
public String bookPage() {
    return "book-page";
}
```

---

### ğŸ”¹ 2. ìˆœìˆ˜ HTML ì‘ë‹µ

```java
@GetMapping("/show/html")
@ResponseBody
public String html() {
    return """
        <html>
        <body>
            <h1>HTML ì‘ë‹µí•˜ê¸°</h1>
        </body>
        </html>
    """;
}
```

---

### ğŸ”¹ 3. ìˆœìˆ˜ í…ìŠ¤íŠ¸ ì‘ë‹µ (MIME íƒ€ì… ì§€ì •)

```java
@GetMapping(value = "/show/text", produces = "text/plain")
@ResponseBody
public String text() {
    return "í•˜ì´ ë‚œ ë¬¸ìì•¼~~";
}
```

* ğŸ“ `@ResponseBody`ëŠ” JSON ë˜ëŠ” HTMLë¡œ ì‘ë‹µí•¨.
* `text/plain` ì„¤ì • ì—†ìœ¼ë©´ HTMLë¡œ ì¸ì‹ë  ìˆ˜ ìˆìŒ.
* ğŸ‘‰ ì‹¤ë¬´ì—ì„œëŠ” ë³´í†µ JSONë§Œ ì‚¬ìš©!

---

### ğŸ”¹ 4. JSON ë°°ì—´ ì‘ë‹µ

```java
@GetMapping("/json/array")
@ResponseBody
public List<String> hobbies() {
    return List.of("í…Œë‹ˆìŠ¤", "ìˆ˜í•™ë¬¸ì œí’€ê¸°", "íƒêµ¬");
}
```

---

### ğŸ”¹ 5. JSON ê°ì²´ ì‘ë‹µ (Map)

```java
@GetMapping("/json/object")
@ResponseBody
public Map<String, Object> myPet() {
    return Map.of(
        "name", "ì•¼ì˜¹ì´",
        "age", 3,
        "kind", "ì½”ìˆ"
    );
}
```

---

### ğŸ”¹ 6. JSON ê°ì²´ ì‘ë‹µ (í´ë˜ìŠ¤)

```java
@GetMapping("/json/object2")
@ResponseBody
public Pet myPet2() {
    return new Pet("ëƒ¥ëƒ¥ì´", 5, "í˜ë¥´ì‹œì•ˆ", true);
}
```

---

### ğŸ”¹ 7. JSON ë°°ì—´ ì‘ë‹µ (ê°ì²´ ë¦¬ìŠ¤íŠ¸)

```java
@GetMapping("/json/object3")
@ResponseBody
public List<Pet> myPet3() {
    return List.of(
        new Pet("ëƒ¥ëƒ¥ì´1", 5, "í˜ë¥´ì‹œì•ˆ", true),
        new Pet("ëƒ¥ëƒ¥ì´2", 7, "í˜ë¥´ì‹œì•ˆ2", false),
        new Pet("ëƒ¥ëƒ¥ì´3", 6, "í˜ë¥´ì‹œì•ˆ3", true),
        new Pet("ëƒ¥ëƒ¥ì´4", 8, "í˜ë¥´ì‹œì•ˆ4", false)
    );
}
```

---

## âœ… ì˜¤ëŠ˜ì˜ í•µì‹¬ ìš”ì•½

* `@RequestParam`, `@PathVariable`ì„ í†µí•´ ìš”ì²­ê°’ì„ ë°›ëŠ” ë°©ë²• ìˆ™ì§€
* ê¸°ë³¸ê°’ì´ ìˆëŠ” ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì²˜ë¦¬ (`defaultValue`)
* ë„ì„œ ëª©ë¡ ì •ë ¬, ìƒì„±, ìˆ˜ì • ê¸°ëŠ¥ êµ¬í˜„ê³¼ API í…ŒìŠ¤íŠ¸ ë°©ë²• í•™ìŠµ
* curlì„ í†µí•´ ì§ì ‘ API í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
* HTML, Text, JSON í˜•íƒœë¡œ ë‹¤ì–‘í•œ ë°ì´í„° ì‘ë‹µ êµ¬í˜„ ê°€ëŠ¥
* ì‹¤ë¬´ì—ì„œëŠ” JSON í˜•íƒœ ì‘ë‹µì„ í‘œì¤€ì²˜ëŸ¼ ì‚¬ìš©í•¨
